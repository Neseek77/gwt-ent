<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>JPA批注参考</title>
</head>

<body>

<div class="postTitle">
  <a id="AjaxHolder_ctl01_TitleUrl" class="postTitle2" href="http://www.cnblogs.com/kentyshang/archive/2008/01/07/1029142.html">
  JPA批注参考</a>
</div>
<h1 class="chapter"><span class="secnum">1</span> JPA 批注参考</h1>
<p class="bodycopy"><span class="bold">版本</span>： 5/12/06</p>
<p class="bodycopy">作为 Java 企业版 5 (Java EE 5) Enterprise Java Bean (EJB) 3.0 
规范的组成部分，Java 持续性 API (JPA) 显著简化了 EJB 
持续性并提供了一个对象关系映射方法，该方法使您可以采用声明方式定义如何通过一种标准的可移植方式（在 Java EE 5 应用服务器内部以及 Java 标准版 
(Java SE) 5 应用程序中的 EJB 容器外部均可使用）将 Java 对象映射到关系数据库表。</p>
<p class="bodycopy">在 JPA 之前，Java EE 应用程序将持续类表示为容器管理的实体 bean。使用 JPA，您可以将任何普通的旧式 
Java 对象 (POJO) 类指定为 JPA 实体：一个应使用 JPA 持续性提供程序的服务将其非临时字段持久保存到关系数据库（在 Java EE EJB 
容器的内部或在简单 Java SE 应用程序中的 EJB 容器的外部）的 Java 对象。</p>
<p class="bodycopy">使用 JPA 时，可以使用批注配置实体的 JPA 行为。批注是一种使用元数据修饰 Java 
源代码的简单表达方法，它编译为相应的 Java 类文件，以便在运行时由 JPA 持续性提供程序解释以管理 JPA 行为。</p>
<p class="bodycopy">例如，要将 Java 类指定为 JPA 实体，请使用 
<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
@Entity</a> 批注，如下所示：</p>
<pre class="bodycopy" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
}
</pre>
<p class="bodycopy">您可以有选择地使用批注来修饰实体类以覆盖默认值。这称作<span class="italic">按异常进行配置</span> 
(configuration by exception)。</p>
<p class="bodycopy">本参考广泛引用了 
<a href="http://jcp.org/aboutJava/communityprocess/pfd/jsr220/index.html">
JSR-220 Enterprise JavaBean 版本 3.0</a> Java 持续性 API 规范，以按类别汇总批注信息（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHCEJG">表 
1-1</a>），并解释了何时以及如何使用这些批注来自定义 JPA 行为，以满足应用程序的需要。</p>
<p class="bodycopy">有关详细信息，请参阅：</p>
<ul>
  <li type="disc">
  <p class="bodycopy">
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IndexOfAnnotations">
  批注索引</a></li>
  <li type="disc">
  <p class="bodycopy">
  <a href="http://java.sun.com/javaee/5/docs/api/index.html?javax/persistence/package-summary.html">
  完整的 JPA 批注 Javadoc</a></li>
</ul>
<div class="tblruleformalwidemax">
  <p class="titleintable">表 1-1 按类别划分的 JPA 批注</p>
  <table class="RuleFormalWideMax" dir="ltr" title="按类别划分的 JPA 批注" summary="This table summarizes the JPA annotations." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
    <thead>
      <tr align="left" valign="top">
        <th class="bodycopy" id="r1c1-t2" align="left" valign="bottom">类别</th>
        <th class="bodycopy" id="r1c2-t2" align="left" valign="bottom">说明</th>
        <th class="bodycopy" id="r1c3-t2" align="left" valign="bottom">批注</th>
      </tr>
    </thead>
    <tr align="left" valign="top">
      <td id="r2c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">实体</td>
      <td headers="r2c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序假设 Java 
      类是非持续类，并且仅当使用此批注对其进行修饰的情况下才可用于 JPA 服务。</p>
      <p class="bodycopy">使用此批注将普通的旧式 Java 对象 (POJO) 类指定为实体，以便可以将它用于 JPA 服务。</p>
      <p class="bodycopy">要将类用于 JPA 服务，必须将该类指定为 JPA 实体（使用此批注或 <code>orm.xml</code> 
      文件）。</td>
      <td headers="r2c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
      @Entity</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r3c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">数据库模式属性</td>
      <td headers="r3c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 
      持续性提供程序假设实体名称对应于同名的数据库表，且实体的数据成员名称对应于同名的数据库列。</p>
      <p class="bodycopy">使用这些批注覆盖此默认行为，并微调对象模型与数据模型之间的关系。</td>
      <td headers="r3c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table">
      @Table</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
      @SecondaryTable</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTables">
      @SecondaryTables</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
      @Column</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
      @JoinColumn</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumns">
      @JoinColumns</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumn">
      @PrimaryKeyJoinColumn</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumns">
      @PrimaryKeyJoinColumns</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
      @JoinTable</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
      @UniqueConstraint</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r4c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">身份</td>
      <td headers="r4c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序假设每个实体必须至少有一个用作主键的字段或属性。</p>
      <p class="bodycopy">使用这些批注指定以下项之一：</p>
      <ul>
        <li type="disc">
        <p class="bodycopy">一个 <code>@Id</code></li>
        <li type="disc">
        <p class="bodycopy">多个 <code>@Id</code> 和一个 <code>@IdClass</code></li>
        <li type="disc">
        <p class="bodycopy">一个 <code>@EmbeddedId</code></li>
      </ul>
      <p class="bodycopy">还可以使用这些批注微调数据库维护实体身份的方式。</td>
      <td headers="r4c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id">
      @Id</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass">
      @IdClass</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId">
      @EmbeddedId</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue">
      @GeneratedValue</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SequenceGenerator">
      @SequenceGenerator</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#TableGenerator">
      @TableGenerator</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r5c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">直接映射</td>
      <td class="bodycopy" headers="r5c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序为大多数 Java 基元类型、基元类型的包装程序以及 <code>
      enums</code> 自动配置一个 <code>Basic</code> 映射。</p>
      <p class="bodycopy">使用这些批注微调数据库实现这些映射的方式。</td>
      <td headers="r5c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic">
      @Basic</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Enumerated">
      @Enumerated</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Temporal">
      @Temporal</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Lob">
      @Lob</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Transient">
      @Transient</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r6c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">关系映射</td>
      <td headers="r6c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">JPA 持续性提供程序要求您显式映射关系。</p>
      <p class="bodycopy">使用这些批注指定实体关系的类型和特征，以微调数据库实现这些关系的方式。</td>
      <td headers="r6c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
      @OneToOne</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToOne">
      @ManyToOne</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToMany">
      @OneToMany</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToMany">
      @ManyToMany</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MapKey">
      @MapKey</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OrderBy">
      @OrderBy</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r7c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">组合</td>
      <td headers="r7c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序假设每个实体均映射到它自己的表。</p>
      <p class="bodycopy">使用这些批注覆盖其他实体拥有的此种实体行为。</td>
      <td headers="r7c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
      @Embeddable</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embedded">
      @Embedded</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
      @AttributeOverride</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverrides">
      @AttributeOverrides</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
      @AssociationOverride</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverrides">
      @AssociationOverrides</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r8c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">继承</td>
      <td headers="r8c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序假设所有持久字段均由一个实体类定义。</p>
      <p class="bodycopy">如果实体类继承了一个或多个超类中的某些或所有持续字段，则使用这些批注。</td>
      <td headers="r8c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
      @Inheritance</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
      @DiscriminatorColumn</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
      @DiscriminatorValue</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
      @MappedSuperclass</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
      @AssociationOverride</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverrides">
      @AssociationOverrides</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
      @AttributeOverride</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverrides">
      @AttributeOverrides</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r9c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">锁定</td>
      <td headers="r9c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序假设应用程序负责数据一致性。</p>
      <p class="bodycopy">使用此批注启用 JPA 管理的乐观锁定（推荐使用）。</td>
      <td headers="r9c1-t2 r1c3-t2" align="left">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Version">
      @Version</a><p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r10c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">生命周期回调事件</td>
      <td headers="r10c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">默认情况下，JPA 持续性提供程序处理所有持续性操作。</p>
      <p class="bodycopy">如果您要在实体生命周期内随时调用自定义逻辑，请使用这些批注将实体方法与 JPA 生命周期事件关联。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCHFJJ">图 
      1-1</a> 演示了这些生命周期事件之间的关系。</td>
      <td headers="r10c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrePersist">
      @PrePersist</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostPersist">
      @PostPersist</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PreRemove">
      @PreRemove</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostRemove">
      @PostRemove</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PreUpdate">
      @PreUpdate</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostUpdate">
      @PostUpdate</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostLoad">
      @PostLoad</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners">
      @EntityListeners</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeDefaultListeners">
      @ExcludeDefaultListeners</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeSuperclassListeners">
      @ExcludeSuperclassListeners</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r11c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">实体管理器</td>
      <td headers="r11c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">在使用 JPA 持续性提供程序的应用程序中，您可以使用 <code>EntityManager</code> 
      实例执行所有持续性操作（创建、读取、更新和删除）。</p>
      <p class="bodycopy">使用这些批注将实体与实体管理器关联并自定义实体管理器的环境。</td>
      <td headers="r11c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
      @PersistenceUnit</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnits">
      @PersistenceUnits</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
      @PersistenceContext</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContexts">
      @PersistenceContexts</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceProperty">
      @PersistenceProperty</a></p>
      <p><br>
　</td>
    </tr>
    <tr align="left" valign="top">
      <td id="r12c1-t2" headers="r1c1-t2" align="left">
      <p class="bodycopy">查询</td>
      <td headers="r12c1-t2 r1c2-t2" align="left">
      <p class="bodycopy">在使用 JPA 
      持续性提供程序的应用程序中，可以使用实体管理器动态创建和执行查询，也可以预定义查询并在运行时按名称执行它们。</p>
      <p class="bodycopy">使用这些批注预定义查询并管理它们的结果集。</td>
      <td headers="r12c1-t2 r1c3-t2" align="left">
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery">
      @NamedQuery</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQueries">
      @NamedQueries</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
      @NamedNativeQuery</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQueries">
      @NamedNativeQueries</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#QueryHint">
      @QueryHint</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult">
      @ColumnResult</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">
      @EntityResult</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">
      @FieldResult</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
      @SqlResultSetMapping</a></p>
      <p class="bodycopy">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMappings">
      @SqlResultSetMappings</a></p>
      <p><br>
　</td>
    </tr>
  </table>
  <p><br>
　</div>
<!-- class="tblruleformalwidemax"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@AssociationOverride</h2>
  <p class="bodycopy">默认情况下，JPA 持续性提供程序自动假设子类继承超类中定义的持久属性及其关联映射。</p>
  <p class="bodycopy">如果继承的列定义对实体不正确（例如，如果继承的列名与已经存在的数据模型不兼容或作为数据库中的列名无效），请使用 
  <code>@AssociationOverride</code> 批注自定义从 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 继承的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
  @OneToOne</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToOne">
  @ManyToOne</a> 映射，以更改与字段或属性关联的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
  @JoinColumn</a>。</p>
  <p class="bodycopy">如果有多个要进行的 <code>@AssociationOverride</code> 更改，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverrides">
  @AssociationOverrides</a>。</p>
  <p class="bodycopy">要自定义基本映射以更改它的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>，请使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
  @AttributeOverride</a>。</p>
  <p class="bodycopy">
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEEJFG">
  表 1-4</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/AssociationOverride.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-2 @AssociationOverride 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@AssociationOverride 属性" summary="This table lists the attributes of the AssociationOverride annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t3" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t3" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t3" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t3" headers="r1c1-t3" align="left">
        <p class="bodycopy"><code>joinColumns</code></td>
        <td headers="r2c1-t3 r1c2-t3" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t3 r1c3-t3" align="left">
        <p class="bodycopy">要指定映射到持久属性的连接列，请将 <code>joinColums</code> 设置为 <code>
        JoinColumn</code> 实例的数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
        @JoinColumn</a>）。</p>
        <p class="bodycopy">映射类型将与可嵌套类或映射的超类中定义的类型相同。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t3" headers="r1c1-t3" align="left">
        <p class="bodycopy"><code>name</code></td>
        <td headers="r3c1-t3 r1c2-t3" align="center">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t3 r1c3-t3" align="left">
        <p class="bodycopy">如果使用了基于属性的访问，则映射的为嵌入对象中的属性名称，如果使用了基于字段的访问，则映射的为字段名称。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p class="bodycopy">
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIJJEI">
  示例 1-4</a> 显示了<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIACBE">示例 
  1-5</a> 中的实体扩展的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIACBE">示例 
  1-5</a> 显示了如何在实体子类中使用 <code>@AssociationOverride</code> 覆盖 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> <code>Employee</code> 中定义（默认情况下）的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
  @JoinColumn</a> 以便关联到 <code>Address</code>。</p>
  <p class="bodycopy">如果使用 <code>@AssociationOverride</code>，则 <code>Employee</code> 
  表包含以下列：</p>
  <ul>
    <li type="disc">
    <p class="bodycopy"><code>ID</code></li>
    <li type="disc">
    <p class="bodycopy"><code>VERSION</code></li>
    <li type="disc">
    <p class="bodycopy"><code>ADDR_ID</code></li>
    <li type="disc">
    <p class="bodycopy"><code>WAGE</code></li>
  </ul>
  <p class="bodycopy">如果不使用 <code>@AssociationOverride</code>，则 <code>Employee</code> 
  表包含以下列：</p>
  <ul>
    <li type="disc">
    <p class="bodycopy"><code>ID</code></li>
    <li type="disc">
    <p class="bodycopy"><code>VERSION</code></li>
    <li type="disc">
    <p class="bodycopy"><code>ADDRESS</code></li>
    <li type="disc">
    <p class="bodycopy"><code>WAGE</code></li>
  </ul>
  <div class="example">
    <p class="titleinexample">示例 1-1 @MappedSuperclass</p>
    <pre class="bodycopy" xml:space="preserve">@MappedSuperclass
public class Employee {
@Id protected Integer id;
@Version protected Integer version;
@ManyToOne protected Address address;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-2 @AssociationOverride</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity@AssociationOverride(name=&quot;address&quot;, joinColumns=@JoinColumn(name=&quot;ADDR_ID&quot;))public class PartTimeEmployee extends Employee {    @Column(name=&quot;WAGE&quot;)    protected Float hourlyWage;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@AssociationOverrides</h2>
  <p>如果需要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
  @AssociationOverride</a>，则必需使用一个 <code>@AssociationOverrides</code> 
  批注指定所有关联覆盖。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB">
  表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/AssociationOverrides.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-3 @AssociationOverrides 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@AssociationOverrides 属性" summary="This table lists the attributes of the AssociationOverrides annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t4" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t4" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t4" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t4" headers="r1c1-t4" align="left">
        <p class="bodycopy"><code>value</code></td>
        <td headers="r2c1-t4 r1c2-t4" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t4 r1c3-t4" align="left">
        <p class="bodycopy">要指定两个或更多覆盖，请将 <code>value</code> 设置为 <code>
        AssociationOverride</code> 实例的数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
        @AssociationOverride</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFEFG">
  示例 1-6</a> 显示了如何使用此批注指定两个关联覆盖。</p>
  <div class="example">
    <p class="titleinexample">示例 1-3 @AssociationOverrides</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@AssociationOverrides({
@AssociationOverride(name=&quot;address&quot;, joinColumn=@Column(name=&quot;ADDR_ID&quot;)),
@AssociationOverride(name=&quot;id&quot;, joinColumn=@Column(name=&quot;PTID&quot;))
})
public class PartTimeEmployee extends Employee {
@Column(name=&quot;WAGE&quot;)
protected Float hourlyWage;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@AttributeOverride</h2>
  <p>默认情况下，JPA 持续性提供程序自动假设子类继承超类中定义的持久属性及其基本映射。</p>
  <p>如果针对实体继承的列定义不正确，请使用 <code>@AttributeOverride</code> 批注自定义一个从 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 继承的基本映射以更改与字段或属性关联的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>。（例如，如果继承的列名与事先存在的数据模型不兼容，或者作为数据库中的列名无效）。</p>
  <p>如果有多个要进行的 <code>@AttributeOverride</code> 更改，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverrides">
  @AttributeOverrides</a>。</p>
  <p>要自定义关联映射以更改它的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
  @JoinColumn</a>，请使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
  @AssociationOverride</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEEJFG">
  表 1-4</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/AttributeOverride.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-4 @AttributeOverride 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@AttributeOverride 属性" summary="This table lists the attributes of the AttributeOverride annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t5" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t5" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t5" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t5" headers="r1c1-t5" align="left"><code>column</code></td>
        <td headers="r2c1-t5 r1c2-t5" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t5 r1c3-t5" align="left">
        <p class="bodycopy">映射到持久属性的 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
        @Column</a>。映射类型将与可嵌套类或映射超类中定义的类型相同。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t5" headers="r1c1-t5" align="left">
        <p class="bodycopy"><code>name</code></td>
        <td headers="r3c1-t5 r1c2-t5" align="center">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t5 r1c3-t5" align="left">
        <p class="bodycopy">如果使用了基于属性的访问，则映射的为嵌入对象中的属性名称，如果使用了基于字段的访问，则映射的为字段名称。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIJJEI">
  示例 1-4</a> 显示了<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIACBE">示例 
  1-5</a> 中的实体扩展的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIACBE">示例 
  1-5</a> 显示了如何使用实体子类中的 <code>@AttributeOverride</code> 覆盖 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> <code>Employee</code> 中定义（默认情况下）的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>，以便基本映射到 <code>Address</code>。</p>
  <p>如果使用 <code>@AttributeOverride</code>，则 <code>Employee</code> 表包含以下列：</p>
  <ul>
    <li type="disc"><code>ID</code></li>
    <li type="disc"><code>VERSION</code></li>
    <li type="disc"><code>ADDR</code>_STRING</li>
    <li type="disc"><code>WAGE</code></li>
  </ul>
  <p>如果不使用 <code>@AttributeOverride</code>，则 <code>Employee</code> 表包含以下列：</p>
  <ul>
    <li type="disc"><code>ID</code></li>
    <li type="disc"><code>VERSION</code></li>
    <li type="disc"><code>ADDRESS</code></li>
    <li type="disc"><code>WAGE</code></li>
  </ul>
  <div class="example">
    <p class="titleinexample">示例 1-4 @MappedSuperclass</p>
    <pre class="oac_no_warn" xml:space="preserve">@MappedSuperclass
public class Employee {
@Id protected Integer id;
@Version protected Integer version;
protected String address;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-5 @AttributeOverride</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@AttributeOverride(name=&quot;address&quot;, column=@Column(name=&quot;ADDR_STRING&quot;))
public class PartTimeEmployee extends Employee {
@Column(name=&quot;WAGE&quot;)
protected Float hourlyWage;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@AttributeOverrides</h2>
  <p>如果需要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
  @AttributeOverride</a>，则必需使用一个 <code>@AttributeOverrides</code> 批注指定所有属性覆盖。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB">
  表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/AttributeOverrides.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-5 @AttributeOverrides 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@AttributeOverrides 属性" summary="This table lists the attributes of the AttributeOverrides annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t6" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t6" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t6" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t6" headers="r1c1-t6" align="left">
        <p class="bodycopy"><code>value</code></td>
        <td headers="r2c1-t6 r1c2-t6" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t6 r1c3-t6" align="left">
        <p class="bodycopy">要指定两个或更多属性覆盖，请将 <code>value</code> 设置为 <code>
        AttributeOverride</code> 实例的数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
        @AttributeOverride</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFEFG">
  示例 1-6</a> 显示了如何使用此批注指定两个属性覆盖。</p>
  <div class="example">
    <p class="titleinexample">示例 1-6 @AttributeOverrides</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@AttributeOverrides({
@AttributeOverride(name=&quot;address&quot;, column=@Column(name=&quot;ADDR_ID&quot;)),
@AttributeOverride(name=&quot;id&quot;, column=@Column(name=&quot;PTID&quot;))
})
public class PartTimeEmployee extends Employee {
@Column(name=&quot;WAGE&quot;)
protected Float hourlyWage;
public PartTimeEmployee() {
...
}
public Float getHourlyWage() {
...
}
public void setHourlyWage(Float wage) {
...
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Basic</h2>
  <p>默认情况下，JPA 持续性提供程序为大多数 Java 基元类型、基元类型的包装程序以及枚举自动配置一个 <code>@Basic</code> 映射。</p>
  <p>使用 <code>@Basic</code> 批注：</p>
  <ul>
    <li type="disc">将获取类型配置为 <code>LAZY</code></li>
    <li type="disc">如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE">
  表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Basic.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-6 @Basic 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Basic 属性" summary="This table lists the attributes of the Basic annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t7" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t7" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t7" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t7" headers="r1c1-t7" align="left"><code>fetch</code></td>
        <td headers="r2c1-t7 r1c2-t7" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t7 r1c3-t7" align="left">
        <p class="bodycopy"><span class="bold">默认值</span>：<code>FetchType.EAGER</code>。</p>
        <p class="bodycopy">默认情况下，JPA 持续性提供程序使用获取类型 <code>EAGER</code>：这将要求持续性提供程序运行时必须迫切获取数据。</p>
        <p class="bodycopy">如果这不适合于应用程序或特定的持久字段，请将 <code>fetch</code> 设置为 <code>
        FetchType.LAZY</code>：这将提示持续性提供程序在首次访问数据（如果可以）时应不急于获取数据。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t7" headers="r1c1-t7" align="left"><code>optional</code></td>
        <td headers="r3c1-t7 r1c2-t7" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t7 r1c3-t7" align="left">
        <p class="bodycopy"><span class="bold">默认值</span>：<code>true</code>。</p>
        <p class="bodycopy">默认情况下，JPA 持续性提供程序假设所有（非基元）字段和属性的值可以为空。</p>
        <p class="bodycopy">如果这并不适合于您的应用程序，请将 <code>optional</code> 设置为 <code>
        false</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHHIEF">
  示例 1-7</a> 显示了如何使用此批注为基本映射指定获取类型 <code>LAZY</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-7 @Basic</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Basic(fetch=LAZY)
protected String getName() {
return name;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Column</h2>
  <p>默认情况下，JPA 持续性提供程序假设每个实体的持久字段存储在其名称与持久字段的名称相匹配的数据库表列中。</p>
  <p>使用 <code>@Column</code> 批注：</p>
  <ul>
    <li type="disc">将持久字段与其他名称关联（如果默认列名难于处理、与事先存在的数据模型不兼容或作为数据库中的列名无效）</li>
    <li type="disc">将持久字段与辅助表中的列关联（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
    @SecondaryTable</a>）</li>
    <li type="disc">微调数据库中列的特征</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBAHAG">
  表 1-7</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Column.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-7 @Column 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Column 属性" summary="This table lists the attributes of the Column annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t8" align="left" valign="bottom">属性</th>
          <th id="r1c2-t8" align="left" valign="bottom">必需</th>
          <th id="r1c3-t8" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t8" headers="r1c1-t8" align="left"><code>columnDefinition</code></td>
        <td headers="r2c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：空 
        <code>String</code>。<p>默认情况下，JPA 使用最少量 SQL 创建一个数据库表列。</p>
        <p>如果需要使用更多指定选项创建的列，请将 <code>columnDefinition</code> 设置为在针对列生成 DDL 时希望 
        JPA 使用的 SQL 片断。</p>
        <p><span class="bold">注意</span>：捕获批注中的 DDL 信息时，某些 JPA 
        持续性提供程序可以在生成数据库模式时使用此 DDL。例如，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#Java2DBSchemaGen">“用于 
        Java2DB 模式生成的 TopLink JPA 扩展”</a>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t8" headers="r1c1-t8" align="left"><code>insertable</code></td>
        <td headers="r3c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设所有列始终包含在 <code>SQL INSERT</code> 语句中。</p>
        <p>如果该列不应包含在这些语句中，请将 <code>insertable</code> 设置为 <code>false</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t8" headers="r1c1-t8" align="left"><code>length</code></td>
        <td headers="r4c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>： 
        255<p>默认情况下，JPA 持续性提供程序假设所有列在用于保存 <code>String</code> 值时的最大长度为 255 个字符。</p>
        <p>如果该列不适合于您的应用程序或数据库，请将 <code>length</code> 设置为适合于您的数据库列的 <code>int</code> 
        值。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t8" headers="r1c1-t8" align="left"><code>name</code></td>
        <td headers="r5c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的每个持久字段都存储在其名称与持久字段或属性的名称相匹配的数据库表列中。<p>要指定其他列名，请将 <code>name</code> 
        设置为所需的 <code>String</code> 列名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t8" headers="r1c1-t8" align="left"><code>nullable</code></td>
        <td headers="r6c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设允许所有列包含空值。</p>
        <p>如果不允许该列包含空值，请将 <code>nullable</code> 设置为 <code>false</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r7c1-t8" headers="r1c1-t8" align="left"><code>precision</code></td>
        <td headers="r7c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r7c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>： 
        0.<p>默认情况下，JPA 持续性提供程序假设所有列在用于保存十进制（精确数字）值时的精度为 0。</p>
        <p>如果该精度不适合于您的应用程序或数据库，请将 <code>precision</code> 设置为相应的 <code>int</code> 
        精度。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r8c1-t8" headers="r1c1-t8" align="left"><code>scale</code></td>
        <td headers="r8c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r8c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>： 
        0.<p>默认情况下，JPA 持续性提供程序假设所有列在用于保存十进制（精确数字）值时的伸缩度为 0。</p>
        <p>如果该伸缩度不适合于您的应用程序或数据库，请将 <code>scale</code> 设置为相应的 <code>int</code> 
        精度。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r9c1-t8" headers="r1c1-t8" align="left"><code>table</code></td>
        <td headers="r9c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r9c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的所有持久字段都存储到一个其名称为实体名称的数据库表中（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table">
        @Table</a>）。<p>如果该列与辅助表关联（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
        @SecondaryTable</a>），请将 <code>name</code> 设置为相应辅助表名称的 <code>String</code> 
        名称，如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA">示例 
        1-8</a> 所示。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r10c1-t8" headers="r1c1-t8" align="left"><code>unique</code></td>
        <td headers="r10c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r10c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：<code>false</code>。<p>
        默认情况下，JPA 持续性提供程序假设允许所有列包含重复值。</p>
        <p>如果不允许该列包含重复值，请将 <code>unique</code> 设置为 <code>true</code>。设置为 true 
        时，这相当于在表级别使用 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
        @UniqueConstraint</a>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r11c1-t8" headers="r1c1-t8" align="left"><code>updatable</code></td>
        <td headers="r11c1-t8 r1c2-t8" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r11c1-t8 r1c3-t8" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设列始终包含在 <code>SQL UPDATE</code> 语句中。</p>
        <p>如果该列不应包含在这些语句中，请将 <code>updatable</code> 设置为 <code>false</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA">
  示例 1-8</a> 显示了如何使用此批注使 JPA 将 <code>empId</code> 持久保存到辅助表 <code>EMP_HR</code> 
  中的列 <code>EMP_NUM</code>。默认情况下，JPA 将 <code>empName</code> 持久保存到主表 <code>
  Employee</code> 中的列 <code>empName</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-8 @Column</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@SecondaryTable(name=&quot;EMP_HR&quot;)
public class Employee implements Serializable {
...
@Column(name=&quot;EMP_NUM&quot;, table=&quot;EMP_HR&quot;)
private Long empId;
private String empName;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@ColumnResult</h2>
  <p>执行 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a> 时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
  <p>使用 <code>@ColumnResult</code> 批注返回标量值。标量类型由您在 <code>@ColumnResult</code> 
  中标识的列类型确定。</p>
  <p>有关详细信息，另请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">
  @EntityResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">@FieldResult</a> 
  和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
  @SqlResultSetMapping</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGAGFI">
  表 1-8</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ColumnResult.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-8 @ColumnResult 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@ColumnResult 属性" summary="This table lists the attributes of the ColumnResult annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t9" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t9" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t9" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t9" headers="r1c1-t9" align="left"><code>name</code></td>
        <td headers="r2c1-t9 r1c2-t9" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t9 r1c3-t9" align="left">在原生 SQL 查询的 <code>SELECT</code> 
        语句中将 <code>name</code> 设置为列名的 <code>String</code> 等效形式。如果在 <code>SELECT</code> 
        中使用列别名（<code>AS</code> 语句），则将 <code>name</code> 设置为列别名。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEGDDF">
  示例 1-9</a> 显示了如何使用此批注将 <code>Item</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDFBJ">示例 
  1-10</a>）标量 <code>name</code> 包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDIAI">示例 
  1-11</a>）中。在该示例中，结果列表将为 <code>Object</code> 数组的 <code>List</code>，如：<code>{[Order, 
  &quot;Shoes&quot;], [Order, &quot;Socks&quot;], ...}</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-9 使用 @ColumnResult 的 Order 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@SqlResultSetMapping(
name=&quot;OrderResults&quot;,
entities={
@EntityResult(
entityClass=Order.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;order_id&quot;),
@FieldResult(name=&quot;quantity&quot;, column=&quot;order_quantity&quot;),
@FieldResult(name=&quot;item&quot;,     column=&quot;order_item&quot;)
}
)
},
columns={
@ColumnResult(
name=&quot;item_name&quot;
)
}
)
@Entity
public class Order {
@Id
protected int id;
protected long quantity;
protected Item item;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-10 Item 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Item {
@Id
protected int id;
protected String name;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-11 结合使用 @SqlResultSetMapping 与 @ColumnResult 
    的原生查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query q = entityManager.createNativeQuery(
&quot;SELECT o.id       AS order_id, &quot; +
&quot;o.quantity AS order_quantity, &quot; +
&quot;o.item     AS order_item, &quot; +
&quot;i.name     AS item_name, &quot; +
&quot;FROM Order o, Item i &quot; +
&quot;WHERE (order_quantity &gt; 25) AND (order_item = i.id)&quot;,
&quot;OrderResults&quot;
);
List resultList = q.getResultList();
// List of Object arrays:{[Order, &quot;Shoes&quot;], [Order, &quot;Socks&quot;], ...}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@DiscriminatorColumn</h2>
  <p>默认情况下，当 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
  @Inheritance</a> 属性策略为 <code>InheritanceType.SINGLE_TABLE</code> 或 <code>
  JOINED</code> 时，JPA 持续性提供程序将创建一个名为 <code>DTYPE</code> 的标识符列以区分继承层次中的类。</p>
  <p>使用 <code>@DiscriminatorColumn</code> 批注：</p>
  <ul>
    <li type="disc">指定一个标识符列名（如果数据模型中的列名不是默认列名 <code>DTYPE</code>）。</li>
    <li type="disc">指定一个适用于应用程序或事先存在的数据模型的标识符列长度</li>
    <li type="disc">微调数据库中的标识符列的特征</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGDIEG">
  表 1-9</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/DiscriminatorColumn.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-9 @DiscriminatorColumn 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@DiscriminatorColumn 属性" summary="This table lists the attributes of the DiscriminatorColumn annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th class="bodycopy" id="r1c1-t10" align="left" valign="bottom">属性</th>
          <th class="bodycopy" id="r1c2-t10" align="left" valign="bottom">必需</th>
          <th class="bodycopy" id="r1c3-t10" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t10" headers="r1c1-t10" align="left"><code>columnDefinition</code></td>
        <td headers="r2c1-t10 r1c2-t10" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t10 r1c3-t10" align="left">
        <p class="bodycopy"><span class="bold">默认值</span>：空 <code>String</code>。</p>
        <p class="bodycopy">默认情况下，JPA 持续性提供程序使用最少量 SQL 创建一个数据库表列。</p>
        <p class="bodycopy">如果需要使用更多指定选项创建的列，请将 <code>columnDefinition</code> 
        设置为在针对列生成 DDL 时希望 JPA 使用的 SQL 片断。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t10" headers="r1c1-t10" align="left"><code>
        discriminatorType</code></td>
        <td headers="r3c1-t10 r1c2-t10" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t10 r1c3-t10" align="left">
        <p class="bodycopy"><span class="bold">默认值</span>：<code>DiscriminatorType.STRING</code>。</p>
        <p class="bodycopy">默认情况下，JPA 持续性提供程序假设标识符类型为 <code>String</code>。</p>
        <p class="bodycopy">如果要使用其他类型，请将 <code>discriminatorType</code> 设置为 
        <code>DiscriminatorType.CHAR</code> 或 <code>DiscriminatorType.INTEGER</code>。</p>
        <p class="bodycopy">您的 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
        @DiscriminatorValue</a> 必须符合此类型。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t10" headers="r1c1-t10" align="left"><code>length</code></td>
        <td headers="r4c1-t10 r1c2-t10" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t10 r1c3-t10" align="left"><span class="bold">默认值</span>： 
        31<p>默认情况下，JPA 持续性提供程序假设标识符列在用于保存 <code>String</code> 值时的最大长度为 255 个字符。</p>
        <p>如果该列不适合于您的应用程序或数据库，请将 <code>length</code> 设置为适合于您的数据库列的 <code>int</code> 
        值。</p>
        <p>您的 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
        @DiscriminatorValue</a> 必须符合此长度。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t10" headers="r1c1-t10" align="left"><code>name</code></td>
        <td headers="r5c1-t10 r1c2-t10" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t10 r1c3-t10" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设标识符列名为“<code>DTYPE</code>”。<p>要指定其他列名，请将 <code>name</code> 
        设置为所需的 <code>String</code> 列名。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFJAHI">
  示例 1-12</a> 显示了如何使用此批注指定一个名为 <code>DISC</code>、类型为 <code>STRING</code>、长度为 20 
  的标识符列。在本示例中，该类的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
  @DiscriminatorValue</a> 指定为 <code>CUST</code>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEFCAC">示例 
  1-13</a> 中的子类将它自己的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
  @DiscriminatorValue</a> 指定为 <code>VIP</code>。在 <code>Customer</code> 和 <code>
  ValuedCustomer</code> 中，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">@DiscriminatorValue</a> 
  的值必须可以转换为由 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
  @DiscriminatorColumn</a> 属性 <code>discriminatorType</code> 指定的类型，并且必须符合 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
  @DiscriminatorColumn</a> 属性 <code>length</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-12 @DiscriminatorColumn 和 @DiscriminatorValue 
    ― 根类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(name=&quot;CUST&quot;)
@Inheritance(strategy=SINGLE_TABLE)
@DiscriminatorColumn(name=&quot;DISC&quot;, discriminatorType=STRING, length=20)
@DiscriminatorValue(value-&quot;CUST&quot;)
public class Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-13 @DiscriminatorValue ― 子类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@DiscriminatorValue(value=&quot;VIP&quot;)
public class ValuedCustomer extends Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@DiscriminatorValue</h2>
  <p class="bodycopy">默认情况下，当 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
  @Inheritance</a> 属性策略为 <code>InheritanceType.SINGLE_TABLE</code> 或 <code>
  JOINED</code> 时，JPA 持续性提供程序使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
  @DiscriminatorColumn</a> 按实体名称区分继承层次中的类（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a>）。</p>
  <p class="bodycopy">使用 <code>@DiscriminatorValue</code> 
  批注指定用于区分此继承层次中的实体的标识符值：</p>
  <ul>
    <li type="disc">如果实体名称不适合于此应用程序</li>
    <li type="disc">匹配现有的数据库模式</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEHH">
  表 1-10</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/DiscriminatorValue.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-10 @DiscriminatorValue 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@DiscriminatorValue 属性" summary="This table lists the attributes of the DiscriminatorValue annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t11" align="left" valign="bottom">属性</th>
          <th id="r1c2-t11" align="left" valign="bottom">必需</th>
          <th id="r1c3-t11" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t11" headers="r1c1-t11" align="left"><code>value</code></td>
        <td headers="r2c1-t11 r1c2-t11" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t11 r1c3-t11" align="left">将 <code>value</code> 设置为符合 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
        @DiscriminatorColumn</a> 属性 <code>discriminatorType</code> 和 <code>
        length</code> 的标识符值的 <code>String</code> 等效形式。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDEIC">
  示例 1-14</a> 显示了如何使用此批注指定一个名为 <code>DISC</code>、类型为 <code>STRING</code>、长度为 20 
  的标识符列。在本示例中，该类的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
  @DiscriminatorValue</a> 指定为 <code>CUST</code>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJICCD">示例 
  1-15</a> 中的子类将它自己的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
  @DiscriminatorValue</a> 指定为 <code>VIP</code>。在 <code>Customer</code> 和 <code>
  ValuedCustomer</code> 中，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">@DiscriminatorValue</a> 
  的值必须可以转换为由 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
  @DiscriminatorColumn</a> 属性 <code>discriminatorType</code> 指定的类型，并且必须符合 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
  @DiscriminatorColumn</a> 属性 <code>length</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-14 @DiscriminatorColumn 和 @DiscriminatorValue 
    ― 根类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(name=&quot;CUST&quot;)
@Inheritance(strategy=SINGLE_TABLE)
@DiscriminatorColumn(name=&quot;DISC&quot;, discriminatorType=STRING, length=20)
@DiscriminatorValue(value-&quot;CUST&quot;)
public class Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-15 @DiscriminatorValue ― 子类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@DiscriminatorValue(value=&quot;VIP&quot;)
public class ValuedCustomer extends Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Embeddable</h2>
  <p>默认情况下，JPA 持续性提供程序假设每个实体均持久保存到它自己的数据库表。</p>
  <p>使用 <code>@Embeddable</code> 
  批注指定一个类，该类的实例存储为拥有实体的固有部分并共享该实体的身份。嵌入对象的每个持久属性或字段都将映射到实体的数据库表。</p>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Embeddable.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDJHG">
  示例 1-16</a> 显示了如何使用此批注指定：类 <code>EmploymentPeriod</code> 在用作批注为 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embedded">
  @Embedded</a> 的持久字段的类型时可以嵌套到实体中（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIFFDE">示例 
  1-17</a>）</p>
  <div class="example">
    <p class="titleinexample">示例 1-16 @Embeddable</p>
    <pre class="oac_no_warn" xml:space="preserve">@Embeddable
public class EmploymentPeriod {
java.util.Date startDate;
java.util.Date endDate;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Embedded</h2>
  <p>默认情况下，JPA 持续性提供程序假设每个实体均持久保存到它自己的数据库表。</p>
  <p>使用 <code>@Embedded</code> 批注指定一个持久字段，该字段的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 类型可以存储为拥有实体的固有部分，并共享该实体的身份。嵌入对象的每个持久属性或字段均映射到拥有实体的数据库表。</p>
  <p>可以结合使用 <code>@Embedded</code> 和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 以建立严格所有权关系的模型，以便在删除了拥有对象的情况下还将删除被拥有的对象。</p>
  <p>嵌入的对象不应映射到多个表。</p>
  <p>默认情况下，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDJHG">@Embeddable</a> 
  类中指定的列定义（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA">
  @Column</a>）适用于 <code>@Embedded</code> 类。如果要覆盖这些列定义，请使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
  @AttributeOverride</a>。</p>
  <p>此批注没有属性。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Embedded.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIFFDE">
  示例 1-17</a> 显示了如何使用该批注指定：<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">@Embeddable</a> 
  类 <code>EmploymentPeriod</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDJHG">示例 
  1-16</a>）可以使用指定的属性覆盖（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
  @AttributeOverride</a>）嵌入到实体类中。如果不需要属性覆盖，则可以完全忽略 <code>@Embedded</code> 批注：JPA 
  持续性提供程序将推断出 <code>EmploymentPeriod</code> 是从它的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 批注进行嵌套。</p>
  <div class="example">
    <p class="titleinexample">示例 1-17 @Embedded</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Embedded
@AttributeOverrides({
@AttributeOverride(name=&quot;startDate&quot;, column=@Column(&quot;EMP_START&quot;)),
@AttributeOverride(name=&quot;endDate&quot;, column=@Column(&quot;EMP_END&quot;))
)
public EmploymentPeriod getEmploymentPeriod() {
...
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@EmbeddedId</h2>
  <p>使用 <code>@EmbeddedId</code> 批注指定一个由实体拥有的可嵌入复合主键类（通常由两个或更多基元类型或 JDK 
  对象类型组成）。从原有数据库映射时（此时数据库键由多列组成），通常将出现复合主键。</p>
  <p>复合主键类具有下列特征：</p>
  <ul>
    <li type="disc">它是一个普通的旧式 Java 对象 (POJO) 类。</li>
    <li type="disc">它必须为 public，并且必须有一个 public 无参数构造函数。</li>
    <li type="disc">如果使用基于属性的访问，则主键类的属性必须为 public 或 protected。</li>
    <li type="disc">它必须是可序列化的。</li>
    <li type="disc">它必须定义 <code>equals</code> 和 <code>hashCode</code> 方法。<p>
    这些方法的值相等性的语义必须与键映射到的数据库类型的数据库相等性一致。</li>
  </ul>
  <p>或者，您可以使复合主键类成为非嵌入类（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass">
  @IdClass</a>）。</p>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EmbeddedId.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CEGCJDJF">
  示例 1-18</a> 显示了一个批注为 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 的典型复合主键类。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CEGBCBEF">示例1-19</a> 
  显示了如何使用可嵌入的复合主键类（使用 <code>@EmbeddedId</code> 批注）配置一个实体。</p>
  <div class="example">
    <p class="titleinexample">示例 1-18 可嵌入复合主键类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Embeddable
public class EmployeePK implements Serializable
{
private String name;
private long id;
public EmployeePK()
{
}
public String getName()
{
return name;
}
public void setName(String name)
{
this.name = name;
}
public long getId()
{
return id;
}
public void setId(long id)
{
this.id = id;
}
public int hashCode()
{
return (int) name.hashCode() + id;
}
public boolean equals(Object obj)
{
if (obj == this) return true;
if (!(obj instanceof EmployeePK)) return false;
if (obj == null) return false;
EmployeePK pk = (EmployeePK) obj;
return pk.id == id &amp;&amp; pk.name.equals(name);
}
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-19 @EmbeddedId</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable
{
EmployeePK primaryKey;
public Employee()
{
}
@EmbeddedId
public EmployeePK getPrimaryKey()
{
return primaryKey;
}
public void setPrimaryKey(EmployeePK pk)
{
primaryKey = pk;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Entity</h2>
  <p>使用 <code>@Entity</code> 批注将普通的旧式 Java 对象 (POJO) 类指定为实体，并使其可用于 JPA 服务。必须将 
  POJO 类指定为实体，然后才可以使用任何其他 JPA 批注。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJBGAB">
  表 1-11</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Entity.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-11 @Entity 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Entity 属性" summary="This table lists the attributes of the Entity annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t12" align="left" valign="bottom">属性</th>
          <th id="r1c2-t12" align="left" valign="bottom">必需</th>
          <th id="r1c3-t12" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t12" headers="r1c1-t12" align="left"><code>name</code></td>
        <td headers="r2c1-t12 r1c2-t12" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t12 r1c3-t12" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体名称是实体类的名称。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHIDBI">示例 
        1-20</a> 中，默认 <code>name</code> 为“<code>Employee</code>”。<p>
        如果实体类名难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的表名无效，请将 <code>name</code> 设置为其他 
        <code>String</code> 值。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHIDBI">
  示例 1-20</a> 显示了该批注的用法。</p>
  <div class="example">
    <p class="titleinexample">示例 1-20 @Entity</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@EntityListeners</h2>
  <p>可以使用生命周期批注（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#LifecycleAnnotations">生命周期事件批注</a>）指定实体中的方法，这些方法在指定的生命周期事件发生时执行您的逻辑。</p>
  <p>使用 <code>@EntityListeners</code> 批注将一个或多个实体监听程序类与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 关联，条件是您需要在指定的生命周期事件发生时执行逻辑，以及：</p>
  <ul>
    <li type="disc">不希望在实体 API 中公开生命周期监听程序方法。</li>
    <li type="disc">要在不同的实体类型之间共享生命周期监听程序逻辑。</li>
  </ul>
  <p>当实体或子类上发生生命周期事件时，JPA 
  持续性提供程序将按监听程序定义的顺序通知每个实体监听程序，并调用使用相应的生命周期事件类型进行批注的实体监听程序方法（如果有）。</p>
  <p>实体监听程序类具有以下特征：</p>
  <ul>
    <li type="disc">它是一个普通的旧式 Java 对象 (POJO) 类</li>
    <li type="disc">它有一个或多个具有以下签名的回调方法：<pre class="oac_no_warn" xml:space="preserve">public void &lt;MethodName&gt;(Object)
    </pre>
    <p>可以指定参数类型 <code>Object</code>，或实体监听程序将与其关联的实体类的类型。</li>
    <li type="disc">它用一个或多个生命周期事件批注对每个回调方法进行批注。<p>
    一个生命周期事件只能与一个回调监听程序方法关联，但某个给定的回调监听程序方法可以与多个生命周期事件关联。</li>
  </ul>
  <p>如果使用实体监听程序，则可以管理哪些实体监听程序使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeDefaultListeners">
  @ExcludeDefaultListeners</a> 和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeSuperclassListeners">
  @ExcludeSuperclassListeners</a> 调用。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJJFJC">
  表 1-12</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EntityListeners.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-12 @EntityListeners 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@EntityListeners 属性" summary="This table lists the attributes of the EntityListeners annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t13" align="left" valign="bottom">属性</th>
          <th id="r1c2-t13" align="left" valign="bottom">必需</th>
          <th id="r1c3-t13" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t13" headers="r1c1-t13" align="left"><code>value</code></td>
        <td headers="r2c1-t13 r1c2-t13" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t13 r1c3-t13" align="left">要为 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
        @Entity</a> 或 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
        @MappedSuperclass</a> 指定实体监听程序类的列表，请将 <code>value</code> 设置为实体监听程序类的 
        <code>Class</code> 数组。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJBJAG">
  示例 1-21</a> 显示了如何使用此批注将实体监听程序类 <code>EmployeePersistListener</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCHCII">示例 
  1-22</a>）和 <code>EmployeeRemoveListener</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHDGAD">示例 
  1-23</a>）与实体 <code>Employee</code> 关联。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHDGAD">示例 
  1-23</a> 显示了您可以将多个生命周期事件与给定的实体监听程序类方法关联，但任何给定的生命周期事件只能在实体监听程序类中出现一次。</p>
  <div class="example">
    <p class="titleinexample">示例 1-21 @EntityListeners</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@EntityListeners(value={EmployeePersistListner.class, EmployeeRemoveListener.class})
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-22 EmployeePersistListener</p>
    <pre class="oac_no_warn" xml:space="preserve">public class EmployeePersistListener {
@PrePersist
employeePrePersist(Object employee) {
...
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-23 EmployeeRemoveListener</p>
    <pre class="oac_no_warn" xml:space="preserve">public class EmployeeRemoveListener {
@PreRemove
@PostRemove
employeePreRemove(Object employee) {
...
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@EntityResult</h2>
  <p>执行 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a> 时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
  <p>使用 <code>@EntityResult</code> 批注返回实体。</p>
  <p>有关详细信息，另请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult">
  @ColumnResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">@FieldResult</a> 
  和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
  @SqlResultSetMapping</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGAGFI">
  表 1-8</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EntityResult.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-13 @EntityResult 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@EntityResult 属性" summary="This table lists the attributes of the EntityResult annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t14" align="left" valign="bottom">属性</th>
          <th id="r1c2-t14" align="left" valign="bottom">必需</th>
          <th id="r1c3-t14" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t14" headers="r1c1-t14" align="left"><code>entityClass</code></td>
        <td headers="r2c1-t14 r1c2-t14" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t14 r1c3-t14" align="left">将 <code>entityClass</code> 
        设置为由 <code>SELECT</code> 语句返回的实体的 <code>Class</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t14" headers="r1c1-t14" align="left"><code>
        discriminatorColumn</code></td>
        <td headers="r3c1-t14 r1c2-t14" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t14 r1c3-t14" align="left"><span class="bold">默认值</span>：空 
        <code>String</code>。<p>默认情况下，JPA 持续性提供程序假设 <code>SELECT</code> 
        语句中不包含标识符列（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
        @Inheritance</a>）。</p>
        <p>如果在 <code>SELECT</code> 语句中使用标识符列，请将 <code>discriminatorColumn</code> 
        设置为所使用的 <code>String</code> 列名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t14" headers="r1c1-t14" align="left"><code>fields</code></td>
        <td headers="r4c1-t14 r1c2-t14" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t14 r1c3-t14" align="left"><span class="bold">默认值</span>：空 
        <code>FieldResult</code> 数组。<p>默认情况下，JPA 持续性提供程序假设 <code>SELECT</code> 
        语句包含与返回的实体的所有字段或属性相对应的所有列，且 <code>SELECT</code> 语句中的列名对应于字段或属性名（未使用 
        <code>AS</code> 语句）。</p>
        <p>如果 SELECT 语句只包含某些与返回的实体的字段或属性相对应的列，或 SELECT 语句中的列名并不对应于字段或属性名（使用了 
        <code>AS</code> 语句），请将 <code>fields</code> 设置为 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">
        @FieldResult</a> 的数组，<code>SELECT</code> 语句中的每一列一个 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">
        @FieldResult</a>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHGEGE">
  示例 1-24</a> 显示了如何使用此批注将 <code>Order</code> 和 <code>Item</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHAJBB">示例 
  1-25</a>）实体包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDDHDC">示例 
  1-26</a>）中。在该示例中，结果列表将为 <code>Object</code> 数组的 <code>List</code>，如：<code>{[Order, 
  Item], [Order, Item], ...}</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-24 使用 @EntityResult 的 Order 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@SqlResultSetMapping(
name=&quot;OrderResults&quot;,
entities={
@EntityResult(
entityClass=Order.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;order_id&quot;),
@FieldResult(name=&quot;quantity&quot;, column=&quot;order_quantity&quot;),
@FieldResult(name=&quot;item&quot;,     column=&quot;order_item&quot;)
}
),
@EntityResult(
entityClass=Item.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;item_id&quot;),
@FieldResult(name=&quot;name&quot;,     column=&quot;item_name&quot;),
}
)
}
)
@Entity
public class Order {
@Id
protected int id;
protected long quantity;
protected Item item;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-25 Item 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Item {
@Id
protected int id;
protected String name;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-26 结合使用 @SqlResultSetMapping 与 @EntityResult 
    的原生查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query q = entityManager.createNativeQuery(
&quot;SELECT o.id       AS order_id, &quot; +
&quot;o.quantity AS order_quantity, &quot; +
&quot;o.item     AS order_item, &quot; +
&quot;i.id       AS item_id, &quot; +
&quot;i.name     AS item_name, &quot; +
&quot;FROM Order o, Item i &quot; +
&quot;WHERE (order_quantity &gt; 25) AND (order_item = i.id)&quot;,
&quot;OrderResults&quot;
);
List resultList = q.getResultList();
// List of Object arrays:{[Order, Item], [Order, Item], ...}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Enumerated</h2>
  <p>默认情况下，JPA 持续性提供程序持久保存枚举常量的序数值。</p>
  <p>使用 <code>@Enumerated</code> 批注指定在 String 值适合应用程序要求或与现有数据库模式匹配的情况下，JPA 
  持续性提供程序是否应持久保存枚举常量的序数值或 <code>String</code> 值。</p>
  <p>该批注可以与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic">
  @Basic</a> 一起使用。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFIAEE">
  表 1-14</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Enumerated.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-14 @Enumerated 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Enumerated 属性" summary="This table lists the attributes of the Enumerated annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t15" align="left" valign="bottom">属性</th>
          <th id="r1c2-t15" align="left" valign="bottom">必需</th>
          <th id="r1c3-t15" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t15" headers="r1c1-t15" align="left"><code>value</code></td>
        <td headers="r2c1-t15 r1c2-t15" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t15 r1c3-t15" align="left"><span class="bold">默认值</span>：<code>EnumType.ORDINAL</code>。<p>
        默认情况下，JPA 持续性提供程序假设对于映射到枚举常量的属性或字段，应持久保存序数值。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEJBHG">示例 
        1-28</a> 中，当持久保存 <code>Employee</code> 时，<code>EmployeeStatus</code> 
        的序数值将写入数据库。</p>
        <p>如果需要持久保存的枚举常量的 String 值，请将 <code>value</code> 设置为 <code>
        EnumType.STRING</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>根据<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEJJFC">示例 
  1-27</a> 中的枚举常量，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEJBHG">示例 
  1-28</a> 显示了如何使用此批注指定在持久保存 <code>Employee</code> 时应将 <code>SalaryRate</code> 的 
  <code>String</code> 值写入数据库。默认情况下，会将 <code>EmployeeStatus</code> 的序数值写入数据库。</p>
  <div class="example">
    <p class="titleinexample">示例 1-27 枚举常量</p>
    <pre class="oac_no_warn" xml:space="preserve">public enum EmployeeStatus {FULL_TIME, PART_TIME, CONTRACT}
public enum SalaryRate {JUNIOR, SENIOR, MANAGER, EXECUTIVE}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-28 @Enumerated</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee {
...
public EmployeeStatus getStatus() {
...
}
@Enumerated(STRING)
public SalaryRate getPayScale() {
...
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@ExcludeDefaultListeners</h2>
  <p>默认监听程序是 <code>orm.xml</code> 文件中指定的一个生命周期事件监听程序类，该类应用于持续性单元（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
  @PersistenceUnit</a>）中的所有实体。在调用任何其他实体监听程序（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners">
  @EntityListeners</a>）之前，JPA 持续性提供程序首先按照 <code>orm.xml</code> 
  文件中定义的顺序调用默认监听程序（如果有）。</p>
  <p>如果默认监听程序行为不适用，请使用 <code>@ExcludeDefaultListeners</code> 批注覆盖（并阻止）针对给定 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 执行的默认监听程序。</p>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ExcludeDefaultListeners.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGBHG">
  示例 1-29</a> 显示了如何使用此批注指定不应对 <code>Employee</code> 实体执行默认监听程序。</p>
  <div class="example">
    <p class="titleinexample">示例 1-29 @ExcludeDefaultListeners</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@ExcludeDefaultListeners
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@ExcludeSuperclassListeners</h2>
  <p>如果继承层次中的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a> 和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 类定义了 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners">
  @EntityListeners</a>，则默认情况下，JPA 持续性提供程序将在调用子类监听程序之前调用超类监听程序。</p>
  <p>如果超类监听程序行为不适用，则使用 <code>@ExcludeSuperclassListeners</code> 批注覆盖（并阻止）针对给定 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 执行的超类监听程序。</p>
  <p><code>@ExcludeSuperclassListeners</code> 批注不影响默认监听程序（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeDefaultListeners">
  @ExcludeDefaultListeners</a>）。</p>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ExcludeSuperclassListeners.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGBHG">
  示例 1-29</a> 显示了如何使用此批注指定不应对 <code>PartTimeEmployee</code> 实体执行超类监听程序 <code>
  EmployeeListener</code>，而是执行默认监听程序和子类监听程序 <code>PartTimeEmployeeListener1</code> 
  和 <code>PartTimeEmployeeListener2</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-30 超类级别的实体监听程序</p>
    <pre class="oac_no_warn" xml:space="preserve">@MappedSuperclass
@EntityListeners(value={EmployeeListener.class})
public class Employee {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-31 子类级别的 @ExcludeSuperclassListeners</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@ExcludeSuperclassListeners
@EntityListners(value={PartTimeEmployeeListener1.class, PartTimeEmployeeListener2.class})
public class PartTimeEmployee extends Employee {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@FieldResult</h2>
  <p>执行 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a> 时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
  <p>默认情况下，JPA 持续性提供程序假设在使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">
  @EntityResult</a> 返回实体时，<code>SELECT</code> 语句将包含与返回的实体的所有字段或属性相对应的所有列，且 
  SELECT 语句中的列名对应于字段或属性名（未使用 AS 语句）。</p>
  <p>如果 <code>SELECT</code> 语句只包含某些与返回的实体的字段或属性相对应的列，或 <code>SELECT</code> 
  语句中的列名并不对应于字段或属性名（使用了 <code>AS</code> 语句），则在使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">
  @EntityResult</a> 返回实体时，请使用 <code>@FieldResult</code> 批注将 <code>SELECT</code> 
  语句中的列映射到字段或属性。</p>
  <p>有关详细信息，另请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult">
  @ColumnResult</a> 和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
  @SqlResultSetMapping</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHEDC">
  表 1-15</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/FieldResult.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-15 @FieldResult 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@FieldResult 属性" summary="This table lists the attributes of the EntityResult annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t16" align="left" valign="bottom">属性</th>
          <th id="r1c2-t16" align="left" valign="bottom">必需</th>
          <th id="r1c3-t16" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t16" headers="r1c1-t16" align="left"><code>column</code></td>
        <td headers="r2c1-t16 r1c2-t16" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t16 r1c3-t16" align="left">将 <code>column</code> 设置为 
        <code>SELECT</code> 语句中使用的列的 <code>String</code> 名称。如果在 <code>SELECT</code> 
        中使用列别名（<code>AS</code> 语句），请将 <code>column</code> 设置为列别名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t16" headers="r1c1-t16" align="left"><code>name</code></td>
        <td headers="r3c1-t16 r1c2-t16" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t16 r1c3-t16" align="left">将 <code>name</code> 
        设置为实体的字段或属性名（作为 <code>String</code>），该名称对应于 <code>column</code> 属性指定的列名。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFAFEB">
  示例 1-32</a> 显示了如何使用此批注将 <code>Order</code> 和 <code>Item</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJGDJI">示例 
  1-33</a>）实体包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDJCJC">示例 
  1-34</a>）中。在该示例中，结果列表将为 <code>Object</code> 数组的 <code>List</code>，如：<code>{[Order, 
  Item], [Order, Item], ...}</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-32 使用 @EntityResult 和 @FieldResult 的 Order 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@SqlResultSetMapping(
name=&quot;OrderResults&quot;,
entities={
@EntityResult(
entityClass=Order.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;order_id&quot;),
@FieldResult(name=&quot;quantity&quot;, column=&quot;order_quantity&quot;),
@FieldResult(name=&quot;item&quot;,     column=&quot;order_item&quot;)
}
),
@EntityResult(
entityClass=Item.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;item_id&quot;),
@FieldResult(name=&quot;name&quot;,     column=&quot;item_name&quot;),
}
)
}
)
@Entity
public class Order {
@Id
protected int id;
protected long quantity;
protected Item item;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-33 Item 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Item {
@Id
protected int id;
protected String name;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-34 结合使用 @SqlResultSetMapping 与 @EntityResult 
    的原生查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query q = entityManager.createNativeQuery(
&quot;SELECT o.id       AS order_id, &quot; +
&quot;o.quantity AS order_quantity, &quot; +
&quot;o.item     AS order_item, &quot; +
&quot;i.id       AS item_id, &quot; +
&quot;i.name     AS item_name, &quot; +
&quot;FROM Order o, Item i &quot; +
&quot;WHERE (order_quantity &gt; 25) AND (order_item = i.id)&quot;,
&quot;OrderResults&quot;
);
List resultList = q.getResultList();
// List of Object arrays:{[Order, Item], [Order, Item], ...}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@GeneratedValue</h2>
  <p>默认情况下，JPA 持续性提供程序管理为实体主键提供的唯一标识符（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id">
  @Id</a>）。</p>
  <p>如果要微调此机制以实现以下目的，请使用 <code>@GeneratedValue</code> 批注：</p>
  <ul>
    <li type="disc">如果您感觉另一个生成器类型更适合于数据库或应用，则覆盖持续性提供程序为数据库选择的身份值生成的类型</li>
    <li type="disc">
    如果此名称难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的主键生成器名称无效，则覆盖持续性提供程序选择的主键生成器名称</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJHED">
  表 1-16</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/GeneratedValue.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-16 @GeneratedValue 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@GeneratedValue 属性" summary="This table lists the attributes of the GeneratedValue annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t17" align="left" valign="bottom">属性</th>
          <th id="r1c2-t17" align="left" valign="bottom">必需</th>
          <th id="r1c3-t17" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t17" headers="r1c1-t17" align="left"><code>generator</code></td>
        <td headers="r2c1-t17 r1c2-t17" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t17 r1c3-t17" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序为它选择的主键生成器分配一个名称。<p>
        如果该名称难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的主键生成器名称无效，则将 <code>generator</code> 
        设置为要使用的 <code>String</code> 生成器名称。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t17" headers="r1c1-t17" align="left"><code>strategy</code></td>
        <td headers="r3c1-t17 r1c2-t17" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t17 r1c3-t17" align="left"><span class="bold">默认值</span>：<code>GenerationType.AUTO</code>。<p>
        默认情况下，JPA 持续性提供程序选择最适合于基础数据库的主键生成器类型。</p>
        <p>如果您感觉另一个生成器类型更适合于数据库或应用程序，请将 <code>strategy</code> 设置为所需的 <code>
        GeneratorType</code>：</p>
        <ul>
          <li type="disc"><code>IDENTITY</code> ― 指定持续性提供程序使用数据库身份列</li>
          <li type="disc"><code>AUTO</code> ― 指定持续性提供程序应选择一个最适合于基础数据库的主键生成器。</li>
          <li type="disc"><code>SEQUENCE</code> ― 指定持续性提供程序使用数据库序列（请参阅 
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SequenceGenerator">
          @SequenceGenerator</a>）</li>
          <li type="disc"><code>TABLE</code> ― 
          指定持续性提供程序为使用基础数据库表的实体分配主键以确保唯一性（请参阅 
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#TableGenerator">
          @TableGenerator</a>）</li>
        </ul>
        </td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJHFBJ">
  示例 1-35</a> 显示了如何使用此批注指示持续性提供程序使用名为 <code>CUST_SEQ</code>、类型为 <code>
  GeneratorType.SEQUENCE</code> 的主键生成器。</p>
  <div class="example">
    <p class="titleinexample">示例 1-35 @GeneratedValue</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Id
@GeneratedValue(strategy=SEQUENCE, generator=&quot;CUST_SEQ&quot;)
@Column(name=&quot;CUST_ID&quot;)
public Long getId() {
return id;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Id</h2>
  <p>使用 <code>@Id</code> 批注将一个或多个持久字段或属性指定为实体的主键。</p>
  <p>对于每个实体，必须至少指定以下项之一：</p>
  <ul>
    <li type="disc">一个 <code>@Id</code></li>
    <li type="disc">多个 <code>@Id</code> 和一个 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass">
    @IdClass</a>（对于复合主键）</li>
    <li type="disc">一个 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId">
    @EmbeddedId</a></li>
  </ul>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Id.html">API</a>。</p>
  <p>默认情况下，JPA 持续性提供程序选择最合适的主键生成器（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue">
  @GeneratedValue</a>）并负责管理主键值：您不必采取任何进一步的操作。如果要使用 JPA 
  持续性提供程序的默认键生成机制，则不必采取任何进一步的操作。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEDIC">
  示例 1-36</a> 显示了如何使用此批注将持久字段 <code>empID</code> 指定为 <code>Employee</code> 表的主键。</p>
  <div class="example">
    <p class="titleinexample">示例 1-36 @Id</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
@Id
private int empID;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@IdClass</h2>
  <p>使用 <code>@IdClass</code> 批注为实体指定一个复合主键类（通常由两个或更多基元类型或 JDK 
  对象类型组成）。从原有数据库映射时（此时数据库键由多列组成），通常将出现复合主键。</p>
  <p>复合主键类具有下列特征：</p>
  <ul>
    <li type="disc">它是一个普通的旧式 Java 对象 (POJO) 类。</li>
    <li type="disc">它必须为 public，并且必须有一个 public 无参数构造函数。</li>
    <li type="disc">如果使用基于属性的访问，则主键类的属性必须为 public 或 protected。</li>
    <li type="disc">它必须是可序列化的。</li>
    <li type="disc">它必须定义 <code>equals</code> 和 <code>hashCode</code> 方法。<p>
    这些方法的值相等性的语义必须与键映射到的数据库类型的数据库相等性一致。</li>
    <li type="disc">它的字段或属性的类型和名称必须与使用 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id">
    @Id</a> 进行批注的实体主键字段或属性的类型和名称相对应。</li>
  </ul>
  <p>或者，您可以使复合主键类成为由实体拥有的嵌入类（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId">
  @EmbeddedId</a>）。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDICGAA">
  表 1-17</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/IdClass.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-17 @IdClass 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@IdClass 属性" summary="This table lists the attributes of the IdClass annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t18" align="left" valign="bottom">属性</th>
          <th id="r1c2-t18" align="left" valign="bottom">必需</th>
          <th id="r1c3-t18" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t18" headers="r1c1-t18" align="left"><code>value</code></td>
        <td headers="r2c1-t18 r1c2-t18" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t18 r1c3-t18" align="left">要指定复合主键类，请将 <code>value</code> 
        设置为所需的 <code>Class</code>（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
        @AttributeOverride</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIEDJE">
  示例 1-37</a> 显示了一个非嵌入的复合主键类。在该类中，字段 <code>empName</code> 和 <code>birthDay</code> 
  的名称和类型必须对应于实体类中属性的名称和类型。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BCGFBFCC">示例 
  1-38</a> 显示了如何使用这个非嵌入的复合主键类（使用 <code>@IdClass</code> 批注）配置 EJB 3.0 实体。由于实体类字段 
  <code>empName</code> 和 <code>birthDay</code> 在主键中使用，因此还必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id">
  @Id</a> 批注对其进行批注。</p>
  <div class="example">
    <p class="titleinexample">示例 1-37 非嵌入的复合主键类</p>
    <pre class="oac_no_warn" xml:space="preserve">public class EmployeePK implements Serializable
{
private String empName;
private Date birthDay;
public EmployeePK()
{
}
public String getName()
{
return empName;
}
public void setName(String name)
{
empName = name;
}
public long getDateOfBirth()
{
return birthDay;
}
public void setDateOfBirth(Date date)
{
birthDay = date;
}
public int hashCode()
{
return (int) empName.hashCode();
}
public boolean equals(Object obj)
{
if (obj == this) return true;
if (!(obj instanceof EmployeePK)) return false;
if (obj == null) return false;
EmployeePK pk = (EmployeePK) obj;
return pk.birthDay == birthDay &amp;&amp; pk.empName.equals(empName);
}
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-38 @IdClass</p>
    <pre class="oac_no_warn" xml:space="preserve">@IdClass(EmployeePK.class)
@Entity
public class Employee
{
@Id String empName;
@Id Date birthDay;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Inheritance</h2>
  <p>默认情况下，JPA 持续性提供程序自动管理继承层次中实体的持续性。</p>
  <p>使用 <code>@Inheritance</code> 批注自定义持续性提供程序的继承层次支持，以提高应用程序性能或匹配现有的数据模型。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIIADD">
  表 1-18</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Inheritance.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-18 @Inheritance 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Inheritance 属性" summary="This table lists the attributes of the Inheritance annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t19" align="left" valign="bottom">属性</th>
          <th id="r1c2-t19" align="left" valign="bottom">必需</th>
          <th id="r1c3-t19" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t19" headers="r1c1-t19" align="left"><code>strategy</code></td>
        <td headers="r2c1-t19 r1c2-t19" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t19 r1c3-t19" align="left"><span class="bold">默认值</span>：<code>InheritanceType.SINGLE_TABLE</code>。<p>
        默认情况下，JPA 持续性提供程序假设层次中的所有类均映射到一个由表的标识符列（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
        @DiscriminatorColumn</a>）中的标识符值（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
        @DiscriminatorValue</a>）区分的表。</p>
        <p>如果这并不适合于应用程序，或者如果必须匹配现有的数据模型，请将 <code>strategy</code> 设置为所需的 <code>
        InheritanceType</code>：</p>
        <ul>
          <li type="disc"><code>SINGLE_TABLE</code><a id="sthref28" onclick="footdisplay(1,&quot;This option provides the best support for both polymorphic relationships between entities and queries that range over the class hierarchy. The disadvantages of this option include the need to make nullable columns that should be \u003ccode\u003eNOT NULL\u003c/code\u003e.&quot;)" href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#sthref28" name="sthref28"><sup class="tablefootnote">Foot?1?</sup></a> 
          ― 层次中的所有类均映射到一个表。该表有一个标识符列（请参阅 
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
          @DiscriminatorColumn</a>），它的值（请参阅 
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
          @DiscriminatorValue</a>）标识由行表示的实例所属的特定子类。</li>
          <li type="disc"><code>TABLE_PER_CLASS</code> ― 
          每个类均映射到单独的表。该类的所有属性（包括继承的属性）映射到该类的表列。</li>
          <li type="disc"><code>JOINED</code> ― 
          类层次的根由一个表表示，而每个子类由单独的表表示。每个子类表只包含特定于该子类的那些字段（而非从其超类继承的字段）和主键列，这些主键列用作超类表主键的外键。</li>
        </ul>
        </td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p class="tablefootnote"><sup class="tablefootnote">Footnote?1?</sup>该选项为跨类层次的实体和查询之间的多态关系提供了最佳支持。该选项的缺点包括需要生成应为 
  <code>NOT NULL</code> 的可空列。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFGEJD">
  示例 1-39</a> 显示了如何使用此批注指定 <code>Customer</code> 的所有子类将使用 <code>
  InheritanceType.JOINED</code>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCHEJA">示例 
  1-40</a> 中的子类将映射到它自己的表（该表针对 <code>ValuedCustomer</code> 的每个持久属性包含一列）和一个外键列（包含 
  <code>Customer</code> 表的主键）。</p>
  <div class="example">
    <p class="titleinexample">示例 1-39 @Inheritance ― 使用 JOINED 的根类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity@Inheritance(strategy=JOINED)public class Customer {
@Id
private int customerId;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-40 @Inheritance ― 使用 JOINED 的子类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class ValuedCustomer extends Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <p>在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJHIAG">示例 
  1-41</a> 中，默认情况下，<code>InheritanceType.SINGLE_TABLE</code> 应用于 <code>Customer</code> 
  及其所有子类。在该示例中，默认标识符表列 <code>DTYPE</code>（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
  @DiscriminatorColumn</a>）指定为具有标识符类型 <code>INTEGER</code>，且 <code>Customer</code> 
  的 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
  @DiscriminatorValue</a> 指定为 <code>1</code>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDGEIH">示例 
  1-42</a> 显示了如何将子类 <code>ValuedCustomer</code> 的标识符值指定为 <code>2</code>。在该示例中，<code>Customer</code> 
  和 <code>ValuedCustomer</code> 的所有持久属性将映射到一个表。</p>
  <div class="example">
    <p class="titleinexample">示例 1-41 @Inheritance ― 指定其标识符列的根类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@DiscriminatorColumn(discriminatorType=DiscriminatorType.INTEGER)
@DiscriminatorValue(value=&quot;1&quot;)
public class Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-42 @Inheritance ― 指定其标识符值的子类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@DiscriminatorValue(value=&quot;2&quot;)
public class ValuedCustomer extends Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@JoinColumn</h2>
  <p>默认情况下，在实体关联中，JPA 
  持续性提供程序使用一个基于现有名称（如字段或属性名称）的数据库模式，以便它可以自动确定要使用的单个连接列（包含外键的列）。</p>
  <p>在以下条件下使用 <code>@JoinColumn</code> 批注：</p>
  <ul>
    <li type="disc">默认连接列名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效</li>
    <li type="disc">您需要使用外部表中的列（非主键列）进行连接</li>
    <li type="disc">您想要使用两个或更多连接列（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumns">
    @JoinColumns</a>）</li>
    <li type="disc">您想要使用一个连接表（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
    @JoinTable</a>）</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBCIDH">
  表 1-19</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/JoinColumn.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-19 @JoinColumn 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@JoinColumn 属性" summary="This table lists the attributes of the JoinColumn annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t20" align="left" valign="bottom">属性</th>
          <th id="r1c2-t20" align="left" valign="bottom">必需</th>
          <th id="r1c3-t20" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t20" headers="r1c1-t20" align="left"><code>columnDefinition</code></td>
        <td headers="r2c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：空 
        <code>String</code>。<p>JPA 使用最少量 SQL 创建一个数据库表列。</p>
        <p>如果需要使用更多指定选项创建列，请将 <code>columnDefinition</code> 设置为在针对列生成 DDL 时希望 
        JPA 使用的 <code>String</code> SQL 片断。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t20" headers="r1c1-t20" align="left"><code>insertable</code></td>
        <td headers="r3c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设它可以插入到所有表列中。</p>
        <p>如果该列为只读，请将 <code>insertable</code> 设置为 <code>false</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t20" headers="r1c1-t20" align="left"><code>name</code></td>
        <td headers="r4c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：如果使用一个连接列，则 
        JPA 持续性提供程序假设外键列的名称是以下名称的连接：<ul>
          <li type="disc">引用关系属性的名称 +“_”+ 被引用的主键列的名称。</li>
          <li type="disc">引用实体的字段名称 +“_”+ 被引用的主键列的名称。</li>
        </ul>
        <p>如果实体中没有这样的引用关系属性或字段（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
        @JoinTable</a>），则连接列名称格式化为以下名称的连接：实体名称 +“_”+ 被引用的主键列的名称。</p>
        <p>
        这是外键列的名称。如果连接针对“一对一”或“多对一”实体关系，则该列位于源实体的表中。如果连接针对“多对多”实体关系，则该列位于连接表（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
        @JoinTable</a>）中。</p>
        <p>如果连接列名难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效，请将 <code>name</code> 
        设置为所需的 <code>String</code> 列名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t20" headers="r1c1-t20" align="left"><code>nullable</code></td>
        <td headers="r5c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设允许所有列包含空值。</p>
        <p>如果不允许该列包含空值，请将 <code>nullable</code> 设置为 <code>false</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t20" headers="r1c1-t20" align="left"><code>
        referencedColumnName</code></td>
        <td headers="r6c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：如果使用一个连接列，则 
        JPA 持续性提供程序假设在实体关系中，被引用的列名是被引用的主键列的名称。<p>如果在连接表（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
        @JoinTable</a>）中使用，则被引用的键列位于拥有实体（如果连接是反向连接定义的一部分，则为反向实体）的实体表中。</p>
        <p>要指定其他列名，请将 <code>referencedColumnName</code> 设置为所需的 <code>String</code> 
        列名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r7c1-t20" headers="r1c1-t20" align="left"><code>table</code></td>
        <td headers="r7c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r7c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的所有持久字段存储到一个名称为实体类名称的数据库表中（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table">
        @Table</a>）。<p>如果该列与辅助表关联（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
        @SecondaryTable</a>），请将 <code>name</code> 设置为相应辅助表名称的 <code>String</code> 
        名称，如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA">示例 
        1-8</a> 所示。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r8c1-t20" headers="r1c1-t20" align="left"><code>unique</code></td>
        <td headers="r8c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r8c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：<code>false</code>。<p>
        默认情况下，JPA 持续性提供程序假设允许所有列包含重复值。</p>
        <p>如果不允许该列包含重复值，请将 <code>unique</code> 设置为 <code>true</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r9c1-t20" headers="r1c1-t20" align="left"><code>updatable</code></td>
        <td headers="r9c1-t20 r1c2-t20" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r9c1-t20 r1c3-t20" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设它可以更新所有表列。</p>
        <p>如果该列为只读，则将 <code>updatable</code> 设置为 <code>false</code></td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEGCDG">
  示例 1-43</a> 显示了如何使用此批注使 JPA 将数据库表 <code>Employee</code> 列 <code>ADDR_ID</code> 
  用作连接列。</p>
  <div class="example">
    <p class="titleinexample">示例 1-43 @JoinColumn</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@ManyToOne
@JoinColumn(name=&quot;ADDR_ID&quot;)
public Address getAddress() {
return address;
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@JoinColumns</h2>
  <p>默认情况下，在实体关联中，JPA 持续性提供程序假设使用一个连接列。</p>
  <p>如果要指定两个或更多连接列（即复合主键），请使用 <code>@JoinColumns</code> 批注。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJCCGA">
  表 1-20</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/JoinColumns.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-20 @JoinColumns 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@JoinColumns 属性" summary="This table lists the attributes of the JoinColumns annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t21" align="left" valign="bottom">属性</th>
          <th id="r1c2-t21" align="left" valign="bottom">必需</th>
          <th id="r1c3-t21" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t21" headers="r1c1-t21" align="left"><code>value</code></td>
        <td headers="r2c1-t21 r1c2-t21" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t21 r1c3-t21" align="left">要指定两个或更多连接列，请将 <code>value</code> 
        设置为 <code>JoinColumn</code> 实例数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
        @JoinColumn</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHEHAF">
  示例 1-44</a> 显示了如何使用此批注指定两个连接列的名称：<code>Employee</code> 表中的 <code>ADDR_ID</code>（其中包含 
  <code>Address</code> 表列 <code>ID</code> 中的外键值）以及 <code>Employee</code> 表中的 
  <code>ADDR_ZIP</code>（其中包含 <code>Address</code> 表列 <code>ZIP</code> 中的外键值）。</p>
  <div class="example">
    <p class="titleinexample">示例 1-44 @JoinColumns</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@ManyToOne
@JoinColumns({
@JoinColumn(name=&quot;ADDR_ID&quot;, referencedColumnName=&quot;ID&quot;),
@JoinColumn(name=&quot;ADDR_ZIP&quot;, referencedColumnName=&quot;ZIP&quot;)
})
public Address getAddress() {
return address;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@JoinTable</h2>
  <p>默认情况下，JPA 
  持续性提供程序在映射多对多关联（或在单向的一对多关联中）的拥有方上的实体关联时使用一个连接表。连接表名称及其列名均在默认情况下指定，且 JPA 
  持续性提供程序假设：在关系的拥有方上的实体主表中，每个主键列有一个连接列。</p>
  <p>如果您需要执行以下操作，请使用 <code>@JoinTable</code> 批注：</p>
  <ul>
    <li type="disc">由于默认名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效而更改连接表的名称</li>
    <li type="disc">由于默认名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效而更改连接表的列名称</li>
    <li type="disc">使用特定目录或模式配置连接表</li>
    <li type="disc">使用唯一约束配置一个或多个连接表列</li>
    <li type="disc">每个实体使用多个连接列</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDDECF">
  表 1-21</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/JoinTable.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-21 @JoinTable 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@JoinTable 属性" summary="This table lists the attributes of the JoinColumns annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t22" align="left" valign="bottom">属性</th>
          <th id="r1c2-t22" align="left" valign="bottom">必需</th>
          <th id="r1c3-t22" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t22" headers="r1c1-t22" align="left"><code>catalog</code></td>
        <td headers="r2c1-t22 r1c2-t22" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t22 r1c3-t22" align="left"><span class="bold">默认值</span>：空 
        <code>String</code>。<p>默认情况下，JPA 使用任何适用于数据库的默认目录。</p>
        <p>如果默认目录不适合于应用程序，请将 <code>catalog</code> 设置为要使用的 <code>String</code> 
        目录名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t22" headers="r1c1-t22" align="left"><code>
        inverseJoinColumns</code></td>
        <td headers="r3c1-t22 r1c2-t22" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t22 r1c3-t22" align="left"><span class="bold">默认值</span>：<code>JoinColumn</code> 
        的空数组。<p>默认情况下，JPA 持续性提供程序假设关联的被拥有方（或另一方）上有一个连接列：被拥有实体的主键列。JPA 
        通过连接被拥有实体的名称 +“_”+ 被引用的主键列的名称来命名该列。</p>
        <p>如果这样的列名难于处理、是一个保留字、与预先存在的数据模型不兼容，或者如果要指定多个连接列，则将 <code>joinColumns</code> 
        设置为 <code>JoinColumn</code>（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
        @JoinColumn</a>）的一个或多个实例。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t22" headers="r1c1-t22" align="left"><code>joinColumns</code></td>
        <td headers="r4c1-t22 r1c2-t22" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t22 r1c3-t22" align="left"><span class="bold">默认值</span>：<code>JoinColumn</code> 
        的空数组。<p>默认情况下，JPA 持续性提供程序假设：拥有实体的每个主键列都有一个连接列。该持续性提供程序通过连接拥有实体的名称+“_”+ 
        被引用主键列的名称来命名这些列。</p>
        <p>如果这样的列名难于处理、是一个保留字、与预先存在的数据模型不兼容，或者如果要指定多个连接列，则将 <code>joinColumns</code> 
        设置为 <code>JoinColumn</code>（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
        @JoinColumn</a>）的一个或多个实例。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t22" headers="r1c1-t22" align="left"><code>name</code></td>
        <td headers="r5c1-t22 r1c2-t22" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t22 r1c3-t22" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序通过使用下划线连接关联主表（拥有方优先）的表名来命名连接表。<p>
        如果这样的连接表难于处理、是一个保留字或与预先存在的数据模型不兼容，则将 <code>name</code> 设置为相应的连接表名。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIEFJE">示例 
        1-45</a> 中，JPA 使用名为 <code>EJB_PROJ_EMP</code> 的连接表。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t22" headers="r1c1-t22" align="left"><code>schema</code></td>
        <td headers="r6c1-t22 r1c2-t22" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t22 r1c3-t22" align="left"><span class="bold">默认值</span>：空 
        <code>String</code>。<p>默认情况下，JPA 使用任何适用于数据库的默认模式。</p>
        <p>如果默认模式不适合于应用程序，则将 <code>schema</code> 设置为要使用的 <code>String</code> 
        模式名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r7c1-t22" headers="r1c1-t22" align="left"><code>
        uniqueConstraints</code></td>
        <td headers="r7c1-t22 r1c2-t22" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r7c1-t22 r1c3-t22" align="left"><span class="bold">默认值</span>：<code>UniqueConstraint</code> 
        的空数组。<p>默认情况下，JPA 持续性提供程序假设连接表中的任何列均没有唯一约束。</p>
        <p>如果唯一约束应用于该表中的一列或多列，则将 <code>uniqueContraints</code> 设置为一个或多个 <code>
        UniqueConstraint</code> 实例的数组。有关详细信息，请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
        @UniqueConstraint</a>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIEFJE">
  示例 1-45</a> 显示了如何使用此批注为 <code>Employee</code> 与 <code>Project</code> 
  之间实体的多对多关系指定一个名为 <code>EMP_PROJ_EMP</code> 的连接表。连接表中有两列：<code>EMP_ID</code> 和 
  <code>PROJ_ID</code>。<code>EMP_ID</code> 列包含其主键列（被引用列）名为 <code>ID</code> 的 
  <code>Employee</code> 表中的主键值。<code>PROJ_ID</code> 列包含其主键列（被引用列）也名为 <code>ID</code> 
  的 <code>Project</code> 表中的主键值。</p>
  <div class="example">
    <p class="titleinexample">示例 1-45 @JoinTable</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@ManyToMany
@JoinTable(
name=&quot;EJB_PROJ_EMP&quot;,
joinColumns=@JoinColumn(name=&quot;EMP_ID&quot;, referencedColumnName=&quot;ID&quot;),
inverseJoinColumns=@JoinColumn(name=&quot;PROJ_ID&quot;, referencedColumnName=&quot;ID&quot;)
)
public Collection getProjects() {
return projects;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Lob</h2>
  <p>默认情况下，JPA 持续性提供程序假设所有持久数据均可以表示为典型的数据库数据类型。</p>
  <p>结合使用 <code>@Lob</code> 批注与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic">
  @Basic</a> 映射，以指定持久属性或字段应作为大型对象持久保存到数据库支持的大型对象类型。</p>
  <p>Lob 可以是二进制类型或字符类型。持续性提供程序从持久字段或属性的类型推断出 Lob 类型。</p>
  <p>对于基于字符串和字符的类型，默认值为 Clob。在所有其他情况下，默认值为 Blob。</p>
  <p>还可以使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a> 属性 <code>columnDefinition</code> 进一步改进 <code>Lob</code> 类型。</p>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Lob.html">API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBIFHG">
  示例 1-46</a> 显示了如何使用此批注指定持久字段 <code>pic</code> 应作为 <code>Blob</code> 进行持久保存。</p>
  <div class="example">
    <p class="titleinexample">示例 1-46 @Lob</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Lob
@Basic(fetch=LAZY)
@Column(name=&quot;EMP_PIC&quot;, columnDefinition=&quot;BLOB NOT NULL&quot;)
protected byte[] pic;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@ManyToMany</h2>
  <p>默认情况下，JPA 为具有多对多多重性的为多值关联自动定义一个 <code>@ManyToMany</code> 映射。</p>
  <p>使用 <code>@ManyToMany</code> 批注：</p>
  <ul>
    <li type="disc">将获取类型配置为 <code>LAZY</code></li>
    <li type="disc">如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
    <li type="disc">由于所使用的 <code>Collection</code> 不是使用一般参数定义的，因此配置关联的目标实体</li>
    <li type="disc">配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
    <li type="disc">配置由持续性提供程序使用的连接表的详细信息（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
    @JoinTable</a>）</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHJFCI">
  表 1-22</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ManyToMany.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-22 @ManyToMany 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@ManyToMany 属性" summary="This table lists the attributes of the ManyToMany annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t23" align="left" valign="bottom">属性</th>
          <th id="r1c2-t23" align="left" valign="bottom">必需</th>
          <th id="r1c3-t23" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t23" headers="r1c1-t23" align="left"><code>cascade</code></td>
        <td headers="r2c1-t23 r1c2-t23" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t23 r1c3-t23" align="left"><span class="bold">默认值</span>：<code>CascadeType</code> 
        的空数组。<p>默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。</p>
        <p>如果希望某些或所有持续性操作层叠到关联的目标，请将 <code>cascade</code> 设置为一个或多个 <code>
        CascadeType</code> 实例，其中包括：</p>
        <ul>
          <li type="disc"><code>ALL</code> ― 针对拥有实体执行的任何持续性操作均层叠到关联的目标。</li>
          <li type="disc"><code>MERGE</code> ― 如果合并了拥有实体，则将 merge 层叠到关联的目标。</li>
          <li type="disc"><code>PERSIST</code> ― 如果持久保存拥有实体，则将 persist 层叠到关联的目标。</li>
          <li type="disc"><code>REFRESH</code> ― 如果刷新了拥有实体，则 refresh 为关联的层叠目标。</li>
          <li type="disc"><code>REMOVE</code> ― 如果删除了拥有实体，则还删除关联的目标。</li>
        </ul>
        </td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t23" headers="r1c1-t23" align="left"><code>fetch</code></td>
        <td headers="r3c1-t23 r1c2-t23" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t23 r1c3-t23" align="left"><span class="bold">默认值</span>：<code>FetchType.EAGER</code>。<p>
        默认情况下，JPA 持续性提供程序使用获取类型 <code>EAGER</code>：这将要求持续性提供程序运行时必须迫切获取数据。</p>
        <p>如果这不适合于应用程序或特定的持久字段，请将 <code>fetch</code> 设置为 <code>FetchType.LAZY</code>：这将提示持续性提供程序在首次访问数据（如果可以）时应不急于获取数据。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t23" headers="r1c1-t23" align="left"><code>mappedBy</code></td>
        <td headers="r4c1-t23 r1c2-t23" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t23 r1c3-t23" align="left"><span class="bold">默认值</span>：如果关系是单向的，则 
        JPA 持续性提供程序确定拥有该关系的字段。<p>如果关系是双向的，则将关联的反向（非拥有）一方上的 <code>mappedBy</code> 
        属性设置为拥有该关系的字段或属性的名称（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJIIFA">示例 
        1-48</a> 所示）。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t23" headers="r1c1-t23" align="left"><code>targetEntity</code></td>
        <td headers="r5c1-t23 r1c2-t23" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t23 r1c3-t23" align="left"><span class="bold">默认值</span>：使用一般参数定义的 
        <code>Collection</code> 的参数化类型。<p>默认情况下，如果使用通过一般参数定义的 <code>Collection</code>，则持续性提供程序将从被引用的对象类型推断出关联的目标实体。</p>
        <p>如果 <code>Collection</code> 不使用一般参数，则必须指定作为关联目标的实体类：将关联拥有方上的 <code>
        targetEntity</code> 元素设置为作为关系目标的实体的 <code>Class</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEDECI">
  示例 1-47</a> 和<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJIIFA">示例 
  1-48</a> 显示了如何使用此批注在使用一般参数的 <code>Customer</code> 和 <code>PhoneNumber</code> 
  之间配置一个多对多映射。</p>
  <div class="example">
    <p class="titleinexample">示例 1-47 @ManyToMany ― 使用一般参数的 Customer 类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Customer implements Serializable {
...
@ManyToMany
@JoinTable(
name=&quot;CUST_PHONE&quot;,
joinColumns=
@JoinColumn(name=&quot;CUST_ID&quot;, referencedColumnName=&quot;ID&quot;),
inverseJoinColumns=
@JoinColumn(name=&quot;PHONE_ID&quot;, referencedColumnName=&quot;ID&quot;)
)
public Set&lt;PhoneNumber&gt; getPhones() {
return phones;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-48 @ManyToMany ― 使用一般参数的 PhoneNumber 类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class PhoneNumber implements Serializable {
...
@ManyToMany(mappedBy=&quot;phones&quot;)
public Set&lt;Customer&gt; getCustomers() {
return customers;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@ManyToOne</h2>
  <p>默认情况下，JPA 为指向具有多对一多重性的其他实体类的单值关联自动定义一个 <code>ManyToOne</code> 映射。</p>
  <p>使用 <code>@ManyToOne</code> 批注：</p>
  <ul>
    <li type="disc">将获取类型配置为 <code>LAZY</code></li>
    <li type="disc">如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
    <li type="disc">配置关联的目标实体（如果无法从被引用的对象类型推断出它）</li>
    <li type="disc">配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDBFHJ">
  表 1-23</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ManyToOne.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-23 @ManyToOne 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@ManyToOne 属性" summary="This table lists the attributes of the ManyToOne annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t24" align="left" valign="bottom">属性</th>
          <th id="r1c2-t24" align="left" valign="bottom">必需</th>
          <th id="r1c3-t24" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t24" headers="r1c1-t24" align="left"><code>cascade</code></td>
        <td headers="r2c1-t24 r1c2-t24" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t24 r1c3-t24" align="left"><span class="bold">默认值</span>：<code>CascadeType</code> 
        的空数组。<p>默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。</p>
        <p>如果希望某些或所有持续性操作层叠到关联的目标，请将 <code>cascade</code> 设置为一个或多个 <code>
        CascadeType</code> 实例，其中包括：</p>
        <ul>
          <li type="disc"><code>ALL</code> ― 针对拥有实体执行的任何持续性操作均层叠到关联的目标。</li>
          <li type="disc"><code>MERGE</code> ― 如果合并了拥有实体，则将 merge 层叠到关联的目标。</li>
          <li type="disc"><code>PERSIST</code> ― 如果持久保存拥有实体，则将 persist 层叠到关联的目标。</li>
          <li type="disc"><code>REFRESH</code> ― 如果刷新了拥有实体，则 refresh 为关联的层叠目标。</li>
          <li type="disc"><code>REMOVE</code> ― 如果删除了拥有实体，则还删除关联的目标。</li>
        </ul>
        </td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t24" headers="r1c1-t24" align="left"><code>fetch</code></td>
        <td headers="r3c1-t24 r1c2-t24" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t24 r1c3-t24" align="left"><span class="bold">默认值</span>：<code>FetchType.EAGER</code>。<p>
        默认情况下，JPA 持续性提供程序使用获取类型 <code>EAGER</code>：这将要求持续性提供程序运行时必须迫切获取数据。</p>
        <p>如果这不适合于应用程序或特定的持久字段，请将 <code>fetch</code> 设置为 <code>FetchType.LAZY</code>：这将提示持续性提供程序在首次访问数据（如果可以）时应不急于获取数据。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t24" headers="r1c1-t24" align="left"><code>optional</code></td>
        <td headers="r4c1-t24 r1c2-t24" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t24 r1c3-t24" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设所有（非基元）字段和属性的值可以为空。</p>
        <p>如果这并不适合于您的应用程序，请将 <code>optional</code> 设置为 <code>false</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t24" headers="r1c1-t24" align="left"><code>targetEntity</code></td>
        <td headers="r5c1-t24 r1c2-t24" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t24 r1c3-t24" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序从被引用的对象类型推断出关联的目标实体<p>如果持续性提供程序无法推断出目标实体的类型，则将关联拥有方上的 <code>
        targetEntity</code> 元素设置为作为关系目标的实体的 <code>Class</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDICGBB">
  示例 1-49</a> 显示了如何使用此批注在使用一般参数的 <code>Customer</code>（被拥有方）和 <code>Order</code>（拥有方）之间配置一个多对一映射。</p>
  <div class="example">
    <p class="titleinexample">示例 1-49 @ManyToOne</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Order implements Serializable {
...
@ManyToOne(optional=false)
@JoinColumn(name=&quot;CUST_ID&quot;, nullable=false, updatable=false)
public Customer getCustomer() {
return customer;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@MapKey</h2>
  <p>默认情况下，JPA 持续性提供程序假设关联实体的主键为 <code>java.util.Map</code> 类型的关联的 <code>Map</code> 
  键：</p>
  <ul>
    <li type="disc">如果主键是批注为 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id">
    @Id</a> 的非复合主键，则该字段或属性的类型实例将用作 <code>Map</code> 键。</li>
    <li type="disc">如果主键是批注为 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass">
    @IdClass</a> 的复合主键，则主键类的实例将用作 <code>Map</code> 键。</li>
  </ul>
  <p>使用 <code>@MapKey</code> 批注：</p>
  <ul>
    <li type="disc">将某个其他字段或属性指定为 <code>Map</code> 键（如果关联实体的主键不适合于应用程序）</li>
    <li type="disc">指定一个嵌入的复合主键类（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId">
    @EmbeddedId</a>）</li>
  </ul>
  <p>指定的字段或属性必须具有唯一约束（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
  @UniqueConstraint</a>）。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJCEJD">
  表 1-24</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/MapKey.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-24 @MapKey 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@MapKey 属性" summary="This table lists the attributes of the Enumerated annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t25" align="left" valign="bottom">属性</th>
          <th id="r1c2-t25" align="left" valign="bottom">必需</th>
          <th id="r1c3-t25" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t25" headers="r1c1-t25" align="left"><code>name</code></td>
        <td headers="r2c1-t25 r1c2-t25" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t25 r1c3-t25" align="left"><span class="bold">默认值</span>：默认情况下，JPA 
        持续性提供程序将关联实体的主键作为 <code>Map</code> 键，以用于映射到非复合主键或复合主键（批注为 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass">
        @IdClass</a>）的 <code>java.util.Map</code> 的属性或字段。<p>如果要将某个其他字段或属性用作 
        <code>Map</code> 键，请将 <code>name</code> 设置为要使用的关联实体的 <code>String</code> 
        字段或属性名。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEIG">示例 
  1-52</a> 中，Project 对作为 <code>Map</code> 的 <code>Employee</code> 实例拥有一对多关系。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEIG">示例 
  1-52</a> 显示了如何使用 <code>@MapKey</code> 批注指定此 <code>Map</code> 的键为 <code>
  Employee</code> 字段 <code>empPK</code>，它是一个类型为 <code>EmployeePK</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEIG">示例 
  1-52</a>）的嵌入式复合主键（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJCCG">示例 
  1-51</a>）。</p>
  <div class="example">
    <p class="titleinexample">示例 1-50 使用 @MapKey 的 Project 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entitypublic class Project {    ...@OneToMany(mappedBy=&quot;project&quot;)    @MapKey(name=&quot;empPK&quot;)    public Map&lt;EmployeePK, Employee&gt; getEmployees() {    ...
}    ...}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-51 Employee 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entitypublic class Employee {    @EmbeddedId public EmployeePK getEmpPK() {     ...
}    ...    @ManyToOne    @JoinColumn(name=&quot;proj_id&quot;)    public Project getProject() {
...
}...}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-52 EmployeePK 复合主键类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Embeddablepublic class EmployeePK {    String name;    Date birthDate;}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@MappedSuperclass</h2>
  <p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均在该实体中定义。</p>
  <p>使用 <code>@MappedSuperclass</code> 
  批注指定一个实体类从中继承持久字段的超类。当多个实体类共享通用的持久字段或属性时，这将是一个方便的模式。</p>
  <p>您可以像对实体那样使用任何直接和关系映射批注（如 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic">
  @Basic</a> 和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToMany">
  @ManyToMany</a>）对该超类的字段和属性进行批注，但由于没有针对该超类本身的表存在，因此这些映射只适用于它的子类。继承的持久字段或属性属于子类的表。</p>
  <p>可以在子类中使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
  @AttributeOverride</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
  @AssociationOverride</a> 批注来覆盖超类的映射配置。</p>
  <p>该批注没有属性。有关更多详细信息，请参阅 该批注没有属性。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EmbeddableSuperclass.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDJD">
  示例 1-53</a> 显示了如何使用此批注将 <code>Employee</code> 指定为映射超类。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDAIHD">示例 
  1-54</a> 显示了如何扩展实体中的此超类，以及如何在实体类中使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
  @AttributeOverride</a> 以覆盖超类中设置的配置。</p>
  <div class="example">
    <p class="titleinexample">示例 1-53 @MappedSuperclass</p>
    <pre class="oac_no_warn" xml:space="preserve">@MappedSuperclass
public class Employee {
@Id
protected Integer empId;
@Version
protected Integer version;
@ManyToOne
@JoinColumn(name=&quot;ADDR&quot;)
protected Address address;
public Integer getEmpId() {
...
}
public void setEmpId(Integer id) {
...
}
public Address getAddress() {
...
}
public void setAddress(Address addr) {
...
}
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-54 扩展 @MappedSuperclass</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@AttributeOverride(name=&quot;address&quot;, column=@Column(name=&quot;ADDR_ID&quot;))
public class PartTimeEmployee extends Employee {
@Column(name=&quot;WAGE&quot;)
protected Float hourlyWage;
public PartTimeEmployee() {
...
}
public Float getHourlyWage() {
...
}
public void setHourlyWage(Float wage) {
...
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@NamedNativeQueries</h2>
  <p>如果需要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a>，则必须使用一个 <code>@NamedNativeQueries</code> 批注指定所有命名查询。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB">
  表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedNativeQueries.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-25 @NamedNativeQueries 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@NamedNativeQueries 属性" summary="This table lists the attributes of the NamedNativeQueries annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t26" align="left" valign="bottom">属性</th>
          <th id="r1c2-t26" align="left" valign="bottom">必需</th>
          <th id="r1c3-t26" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t26" headers="r1c1-t26" align="left"><code>value</code></td>
        <td headers="r2c1-t26 r1c2-t26" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t26 r1c3-t26" align="left">要指定两个或更多属性覆盖，请将 <code>value</code> 
        设置为 <code>NamedNativeQuery</code> 实例数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
        @NamedNativeQuery</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFEFG">
  示例 1-6</a> 显示了如何使用此批注指定两个命名原生查询。</p>
  <div class="example">
    <p class="titleinexample">示例 1-55 @NamedNativeQueries</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@NamedNativeQueries({
@NamedNativeQuery(
name=&quot;findAllPartTimeEmployees&quot;,
query=&quot;SELECT * FROM EMPLOYEE WHERE PRT_TIME=1&quot;
),
@NamedNativeQuery(
name=&quot;findAllSeasonalEmployees&quot;,
query=&quot;SELECT * FROM EMPLOYEE WHERE SEASON=1&quot;
)
})
public class PartTimeEmployee extends Employee {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@NamedNativeQuery</h2>
  <p>在使用 JPA 持续性提供程序的应用程序中，可以使用实体管理器动态创建和执行查询，也可以预定义查询并在运行时按名称执行。</p>
  <p>使用 <code>@NamedNativeQuery</code> 批注创建与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 关联的预定义查询，这些查询：</p>
  <ul>
    <li type="disc">使用基础数据库的原生 SQL</li>
    <li type="disc">经常被使用</li>
    <li type="disc">比较复杂并且难于创建</li>
    <li type="disc">可以在不同实体之间共享</li>
    <li type="disc">返回实体、标量值或两者的组合（另请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult">
    @ColumnResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">@EntityResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">@FieldResult</a> 
    和 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
    @SqlResultSetMapping</a>）</li>
  </ul>
  <p>如果有多个要定义的 <code>@NamedNativeQuery</code>，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQueries">
  @NamedNativeQueries</a>。</p>
  <p>要预定义适合于任何数据库的可移植查询，请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery">
  @NamedQuery</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE">
  表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedNativeQuery.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-26 @NamedNativeQuery 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@NamedNativeQuery 属性" summary="This table lists the attributes of the NamedNativeQuery annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t27" align="left" valign="bottom">属性</th>
          <th id="r1c2-t27" align="left" valign="bottom">必需</th>
          <th id="r1c3-t27" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t27" headers="r1c1-t27" align="left"><code>query</code></td>
        <td headers="r2c1-t27 r1c2-t27" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t27 r1c3-t27" align="left">要指定查询，请将 <code>query</code> 
        设置为 SQL 查询（作为 <code>String</code>）。<p>有关原生 SQL 查询语言的详细信息，请参阅数据库文档。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t27" headers="r1c1-t27" align="left"><code>hints</code></td>
        <td headers="r3c1-t27 r1c2-t27" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t27 r1c3-t27" align="left"><span class="bold">默认值</span>：空 
        <code>QueryHint</code> 数组。<p>默认情况下，JPA 持续性提供程序假设 SQL 查询应完全按照 <code>query</code> 
        属性提供的方式执行。</p>
        <p>要微调查询的执行，可以选择将 <code>hints</code> 设置为一个 <code>QueryHint</code> 数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#QueryHint">
        @QueryHint</a>）。在执行时，<code>EntityManager</code> 将向基础数据库传递提示。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t27" headers="r1c1-t27" align="left"><code>name</code></td>
        <td headers="r4c1-t27 r1c2-t27" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t27 r1c3-t27" align="left">要指定查询名称，请将 <code>name</code> 
        设置为所需的 <code>String</code> 名称。<p>这是您在运行时调用查询所使用的名称（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD">示例 
        1-60</a>）。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t27" headers="r1c1-t27" align="left"><code>resultClass</code></td>
        <td headers="r5c1-t27 r1c2-t27" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t27 r1c3-t27" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设结果类是关联实体的 <code>Class</code>。<p>要指定结果类，请将 <code>resultClass</code> 
        设置为所需的 <code>Class</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t27" headers="r1c1-t27" align="left"><code>resultSetMapping</code></td>
        <td headers="r6c1-t27 r1c2-t27" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t27 r1c3-t27" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设原生 SQL 查询中的 <code>SELECT</code> 
        语句：返回一个类型的实体；包括与返回的实体的所有字段或属性相对应的所有列；并使用与字段或属性名称（未使用 <code>AS</code> 
        语句）相对应的列名。<p>要控制 JPA 持续性提供程序如何将 JDBC 结果集映射到实体字段或属性以及标量，请通过将 <code>
        resultSetMapping</code> 设置为所需的 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
        @SqlResultSetMapping</a> 的 <code>String</code> 名称来指定结果集映射。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBBHCBF">
  示例 1-59</a> 显示了如何使用 <code>@NamedNativeQuery</code> 批注定义一个使用基础数据库的原生 SQL 的查询。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD">示例 
  1-60</a> 显示了如何使用 <code>EntityManager</code> 获取此查询以及如何通过 <code>Query</code> 方法 
  <code>getResultList</code> 执行该查询。</p>
  <div class="example">
    <p class="titleinexample">示例 1-56 使用 @NamedNativeQuery 实现一个 Oracle 层次查询</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@NamedNativeQuery(
name=&quot;findAllEmployees&quot;,
query=&quot;SELECT * FROM EMPLOYEE&quot;
)
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-57 执行一个命名原生查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query queryEmployees = em.createNamedQuery(&quot;findAllEmployees&quot;);
Collection employees = queryEmployees.getResultList();
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@NamedQueries</h2>
  <p>如果需要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery">
  @NamedQuery</a>，则必须使用一个 <code>@NamedQueries</code> 批注指定所有命名查询。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB">
  表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedQueries.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-27 @NamedQueries 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@NamedQueries 属性" summary="This table lists the attributes of the NamedQueries annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t28" align="left" valign="bottom">属性</th>
          <th id="r1c2-t28" align="left" valign="bottom">必需</th>
          <th id="r1c3-t28" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t28" headers="r1c1-t28" align="left"><code>value</code></td>
        <td headers="r2c1-t28 r1c2-t28" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t28 r1c3-t28" align="left">要指定两个或更多属性覆盖，请将 <code>value</code> 
        设置为 <code>NamedQuery</code> 实例数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery">
        @NamedQuery</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFEFG">
  示例 1-6</a> 显示了如何使用此批注指定两个命名查询。</p>
  <div class="example">
    <p class="titleinexample">示例 1-58 @NamedQueries</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@NamedQueries({
@NamedQuery(
name=&quot;findAllEmployeesByFirstName&quot;,
query=&quot;SELECT OBJECT(emp) FROM Employee emp WHERE emp.firstName = :firstname&quot;
),
@NamedQuery(
name=&quot;findAllEmployeesByLasttName&quot;,
query=&quot;SELECT OBJECT(emp) FROM Employee emp WHERE emp.lasstName = :lastname&quot;
)
})
public class PartTimeEmployee extends Employee {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@NamedQuery</h2>
  <p>在使用 JPA 持续性提供程序的应用程序中，可以使用实体管理器动态创建和执行查询，也可以预定义查询并在运行时按名称执行。</p>
  <p>使用 <code>@NamedQuery</code> 批注创建与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
  @MappedSuperclass</a> 关联的预定义查询，这些查询：</p>
  <ul>
    <li type="disc">使用 JPA 查询语言（请参阅 
    <a href="http://jcp.org/aboutJava/communityprocess/pfd/jsr220/index.html">
    JSR-000220 Enterprise JavaBeans v3.0</a> 规范，第 4 章）进行基于任何基础数据库的可移植执行</li>
    <li type="disc">经常被使用</li>
    <li type="disc">比较复杂并且难于创建</li>
    <li type="disc">可以在不同实体之间共享</li>
    <li type="disc">只返回实体（从不返回标量值），并只返回一个类型的实体</li>
  </ul>
  <p>如果有多个要定义的 <code>@NamedQuery</code>，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQueries">
  @NamedQueries</a>。</p>
  <p>要在已知的基础数据库中预定义原生 SQL 查询，请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a>。使用原生 SQL 查询，您可以返回实体（包括不同类型的实体）、标量值或同时返回两者。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE">
  表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedQuery.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-28 @NamedQuery 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@NamedQuery 属性" summary="This table lists the attributes of the NamedQuery annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t29" align="left" valign="bottom">属性</th>
          <th id="r1c2-t29" align="left" valign="bottom">必需</th>
          <th id="r1c3-t29" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t29" headers="r1c1-t29" align="left"><code>query</code></td>
        <td headers="r2c1-t29 r1c2-t29" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t29 r1c3-t29" align="left">要指定查询，请将 <code>query</code> 
        设置为 JPA 查询语言（作为 <code>String</code>）。<p>有关 JPA 查询语言的详细信息，请参阅 
        <a href="http://jcp.org/aboutJava/communityprocess/pfd/jsr220/index.html">
        JSR-000220 Enterprise JavaBeans v.3.0</a> 规范的第 4 章。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t29" headers="r1c1-t29" align="left"><code>hints</code></td>
        <td headers="r3c1-t29 r1c2-t29" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t29 r1c3-t29" align="left"><span class="bold">默认值</span>：空 
        <code>QueryHint</code> 数组。<p>默认情况下，JPA 持续性提供程序假设 SQL 查询应完全按照 <code>query</code> 
        属性提供的方式执行，而不管基础数据库如何。</p>
        <p>如果您知道基础数据库在运行时的状态，则要微调查询的执行，可以选择将 <code>hints</code> 设置为 <code>
        QueryHint</code> 数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#QueryHint">
        @QueryHint</a>）。在执行时，<code>EntityManager</code> 将向基础数据库传递提示。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t29" headers="r1c1-t29" align="left"><code>name</code></td>
        <td headers="r4c1-t29 r1c2-t29" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t29 r1c3-t29" align="left">要指定查询名称，请将 <code>name</code> 
        设置为查询名称（作为 <code>String</code>）。<p>这是您在运行时调用查询所使用的名称（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD">示例 
        1-60</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBBHCBF">
  示例 1-59</a> 显示了如何使用 <code>@NamedQuery</code> 批注定义一个JPA 查询语言查询，该查询使用名为 <code>
  firstname</code> 的参数。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD">示例 
  1-60</a> 显示了如何使用 <code>EntityManager</code> 获取此查询并使用 <code>Query</code> 方法 
  <code>setParameter</code> 设置 <code>firstname</code> 参数。</p>
  <div class="example">
    <p class="titleinexample">示例 1-59 使用 @NamedQuery 实现一个带参数的查询</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@NamedQuery(
name=&quot;findAllEmployeesByFirstName&quot;,
query=&quot;SELECT OBJECT(emp) FROM Employee emp WHERE emp.firstName = :firstname&quot;
)
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-60 执行命名查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query queryEmployeesByFirstName = em.createNamedQuery(&quot;findAllEmployeesByFirstName&quot;);
queryEmployeeByFirstName.setParameter(&quot;firstName&quot;, &quot;John&quot;);
Collection employees = queryEmployessByFirstName.getResultList();
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@OneToMany</h2>
  <p>默认情况下，JPA 为具有一对多多重性的多值关联定义一个 <code>OneToMany</code> 映射。</p>
  <p>使用 <code>@OneToMany</code> 批注：</p>
  <ul>
    <li type="disc">将获取类型配置为 <code>LAZY</code></li>
    <li type="disc">由于所使用的 <code>Collection</code> 不是使用一般参数定义的，因此配置关联的目标实体</li>
    <li type="disc">配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
    <li type="disc">配置持续性提供程序对单向一对多关系使用的连接表（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
    @JoinTable</a>）的详细信息</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFABBF">
  表 1-29</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/OneToMany.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-29 @OneToMany 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@OneToMany 属性" summary="This table lists the attributes of the OneToMany annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t30" align="left" valign="bottom">属性</th>
          <th id="r1c2-t30" align="left" valign="bottom">必需</th>
          <th id="r1c3-t30" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t30" headers="r1c1-t30" align="left"><code>cascade</code></td>
        <td headers="r2c1-t30 r1c2-t30" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t30 r1c3-t30" align="left"><span class="bold">默认值</span>：<code>CascadeType</code> 
        的空数组。<p>默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。</p>
        <p>如果希望某些或所有持续性操作层叠到关联的目标，请将 <code>cascade</code> 设置为一个或多个 <code>
        CascadeType</code> 实例，其中包括：</p>
        <ul>
          <li type="disc"><code>ALL</code> - 针对拥有实体执行的任何持续性操作均层叠到关联的目标。</li>
          <li type="disc"><code>MERGE</code> - 如果合并了拥有实体，则将 merge 层叠到关联的目标。</li>
          <li type="disc"><code>PERSIST</code> - 如果持久保存拥有实体，则将 persist 层叠到关联的目标。</li>
          <li type="disc"><code>REFRESH</code> - 如果刷新了拥有实体，则 refresh 为关联的层叠目标。</li>
          <li type="disc"><code>REMOVE</code> - 如果删除了拥有实体，则还删除关联的目标。</li>
        </ul>
        </td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t30" headers="r1c1-t30" align="left"><code>fetch</code></td>
        <td headers="r3c1-t30 r1c2-t30" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t30 r1c3-t30" align="left"><span class="bold">默认值</span>：<code>FetchType.EAGER</code>。<p>
        默认情况下，JPA 持续性提供程序使用获取类型 <code>EAGER</code>：它要求持续性提供程序运行时必须急性获取数据。</p>
        <p>如果这不适合于应用程序或特定的持久字段，请将 <code>fetch</code> 设置为 <code>FetchType.LAZY</code>：它提示持续性提供程序在首次访问数据（如果可以）时应惰性获取数据。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t30" headers="r1c1-t30" align="left"><code>mappedBy</code></td>
        <td headers="r4c1-t30 r1c2-t30" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t30 r1c3-t30" align="left"><span class="bold">默认值</span>：如果关系是单向的，则该持续性提供程序确定拥有该关系的字段。<p>
        如果关系是双向的，则将关联相反（非拥有）方上的 <code>mappedBy</code> 元素设置为拥有此关系的字段或属性的名称（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDECAEH">示例 
        1-62</a> 所示）。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t30" headers="r1c1-t30" align="left"><code>targetEntity</code></td>
        <td headers="r5c1-t30 r1c2-t30" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t30 r1c3-t30" align="left"><span class="bold">默认值</span>：使用一般参数定义的 
        <code>Collection</code> 的参数化类型。<p>默认情况下，如果使用通过一般参数定义的 
        Collection，则持续性提供程序从被引用的对象类型推断出关联的目标实体。</p>
        <p>如果 <code>Collection</code> 不使用一般参数，则必须指定作为关联目标的实体类：将关联拥有方上的 <code>
        targetEntity</code> 元素设置为作为关系目标的实体的 <code>Class</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJBEH">
  示例 1-61</a> 和<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDECAEH">示例 
  1-62</a> 显示了如何使用此批注在使用一般参数的 <code>Customer</code>（被拥有方）和 <code>Order</code>（拥有方）之间配置一个一对多映射。</p>
  <div class="example">
    <p class="titleinexample">示例 1-61 @OneToMany - 使用一般参数的 Customer 类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Customer implements Serializable {
...
@OneToMany(cascade=ALL, mappedBy=&quot;customer&quot;)
public Set&lt;Order&gt; getOrders() {
return orders;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-62 @ManyToOne - 使用一般参数的 Order 类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Customer implements Serializable {
...
@ManyToOne
@JoinColumn(name=&quot;CUST_ID&quot;, nullable=false)
public Customer getCustomer() {
return customer;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@OneToOne</h2>
  <p>默认情况下，JPA 为指向另一个具有一对一多重性的实体的单值关联定义一个 <code>OneToOne</code> 
  映射，并从被引用的对象类型推断出关联的目标实体。</p>
  <p>使用 <code>@OneToOne</code> 批注：</p>
  <ul>
    <li type="disc">将获取类型配置为 <code>LAZY</code></li>
    <li type="disc">如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
    <li type="disc">配置关联的目标实体（如果无法从被引用的对象类型推断出它）</li>
    <li type="disc">配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHCJHG">
  表 1-30</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/OneToOne.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-30 @OneToOne 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@OneToOne 属性" summary="This table lists the attributes of the OneToOne annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t31" align="left" valign="bottom">属性</th>
          <th id="r1c2-t31" align="left" valign="bottom">必需</th>
          <th id="r1c3-t31" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t31" headers="r1c1-t31" align="left"><code>cascade</code></td>
        <td headers="r2c1-t31 r1c2-t31" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t31 r1c3-t31" align="left"><span class="bold">默认值</span>：空 
        <code>CascadeType</code> 数组。<p>默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。</p>
        <p>如果希望某些或所有持续性操作层叠到关联的目标，请将 <code>cascade</code> 设置为一个或多个 <code>
        CascadeType</code> 实例，其中包括：</p>
        <ul>
          <li type="disc"><code>ALL</code> - 针对拥有实体执行的任何持续性操作均层叠到关联的目标。</li>
          <li type="disc"><code>MERGE</code> - 如果合并了拥有实体，则将 merge 层叠到关联的目标。</li>
          <li type="disc"><code>PERSIST</code> - 如果持久保存拥有实体，则将 persist 层叠到关联的目标。</li>
          <li type="disc"><code>REFRESH</code> - 如果刷新了拥有实体，则 refresh 为关联的层叠目标。</li>
          <li type="disc"><code>REMOVE</code> - 如果删除了拥有实体，则还删除关联的目标。</li>
        </ul>
        </td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t31" headers="r1c1-t31" align="left"><code>fetch</code></td>
        <td headers="r3c1-t31 r1c2-t31" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t31 r1c3-t31" align="left"><span class="bold">默认值</span>：<code>FetchType.EAGER</code>。<p>
        默认情况下，JPA 持续性提供程序使用获取类型 <code>EAGER</code>：它要求持续性提供程序运行时必须急性获取数据。</p>
        <p>如果这不适合于应用程序或特定的持久字段，请将 <code>fetch</code> 设置为 <code>FetchType.LAZY</code>：它提示持续性提供程序在首次访问数据（如果可以）时应惰性获取数据。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t31" headers="r1c1-t31" align="left"><code>mappedBy</code></td>
        <td headers="r4c1-t31 r1c2-t31" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t31 r1c3-t31" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序从被引用的对象类型推断出关联的目标实体<p>如果持续性提供程序无法推断关联的目标实体，则将关联的相反（非拥有）方上的 <code>
        mappedBy</code> 元素设置为拥有此关系的字段或属性的 <code>String</code> 名称（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHJBA">示例 
        1-64</a>）所示。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t31" headers="r1c1-t31" align="left"><code>optional</code></td>
        <td headers="r5c1-t31 r1c2-t31" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t31 r1c3-t31" align="left"><span class="bold">默认值</span>：<code>true</code>。<p>
        默认情况下，JPA 持续性提供程序假设所有（非基元）字段和属性的值可以为空。</p>
        <p>如果这并不适合于您的应用程序，请将 <code>optional</code> 设置为 <code>false</code>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t31" headers="r1c1-t31" align="left"><code>targetEntity</code></td>
        <td headers="r6c1-t31 r1c2-t31" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t31 r1c3-t31" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序从被引用的对象类型推断出关联的目标实体<p>如果持续性提供程序无法推断出目标实体的类型，则将关联的拥有方上的 <code>
        targetEntity</code> 元素设置为作为关系目标的实体的 <code>Class</code>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBCBGI">
  示例 1-63</a> 和<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHJBA">示例 
  1-64</a> 显示了如何使用此批注在 <code>Customer</code>（拥有方）和 <code>CustomerRecord</code>（被拥有方）之间配置一个一对一映射。</p>
  <div class="example">
    <p class="titleinexample">示例 1-63 @OneToOne - Customer 类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Customer implements Serializable {
...
@OneToOne(optional=false)
@JoinColumn(name=&quot;CUSTREC_ID&quot;, unique=true, nullable=false, updatable=false)
public CustomerRecord getCustomerRecord() {
return customerRecord;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-64 @OneToOne - CustomerRecord 类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class CustomerRecord implements Serializable {
...
@OneToOne(optional=false, mappedBy=&quot;customerRecord&quot;)
public Customer getCustomer() {
return customer;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@OrderBy</h2>
  <p>默认情况下，JPA 持续性提供程序按关联实体的主键以升序顺序检索 <code>Collection</code> 关联的成员。</p>
  <p>将 <code>@OrderBy</code> 批注与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToMany">
  @OneToMany</a> 和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToMany">
  @ManyToMany</a> 一起使用以便：</p>
  <ul>
    <li type="disc">指定一个或多个作为排序依据的其他字段或属性</li>
    <li type="disc">为每个这样的字段或属性名指定不同的排序（升序或降序）</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGJDIB">
  表 1-31</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/OrderBy.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-31 @OrderBy 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@OrderBy 属性" summary="This table lists the attributes of the OrderBy annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t32" align="left" valign="bottom">属性</th>
          <th id="r1c2-t32" align="left" valign="bottom">必需</th>
          <th id="r1c3-t32" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t32" headers="r1c1-t32" align="left"><code>value</code></td>
        <td headers="r2c1-t32 r1c2-t32" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t32 r1c3-t32" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序按关联实体的主键以升序顺序检索 <code>Collection</code> 关联的成员。<p>
        如果要按某些其他字段或属性排序并指定了不同的排序，则将 <code>value</code> 设置为以下元素的逗号分隔列表：&quot;<code>property-or-field-name</code>
        <code>ASC</code>|<code>DESC</code>”（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHGAG">示例 
        1-65</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHGAG">
  示例 1-65</a> 显示了如何使用 <code>@OrderBy</code> 批注指定 Project 方法 <code>getEmployees</code> 
  应按 <code>Employee</code> 字段 <code>lastname</code> 以升序顺序并按 <code>Employee</code> 
  字段 <code>seniority</code> 以降序顺序返回 <code>Employee</code> 的 <code>List</code>。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEFIIA">示例 
  1-66</a> 显示了默认情况下，<code>Employee</code> 方法 <code>getProjects</code> 按 <code>
  Employee</code> 主键 <code>empId</code> 以升序顺序返回 <code>List</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-65 Project 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity public class Project {
...
@ManyToMany
@OrderBy(&quot;lastname ASC&quot;, &quot;seniority DESC&quot;)
public List&lt;Employee&gt; getEmployees() {
...
};
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-66 Employee 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity public class Employee {
@Id
private int empId;
...
private String lastname;
...
private int seniority;
...
@ManyToMany(mappedBy=&quot;employees&quot;)
// By default, returns a List in ascending order by empId
public List&lt;Project&gt; getProjects() {
...
};
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PersistenceContext</h2>
  <p>在使用 JPA 持续性提供程序的应用程序中，可以使用实体管理器执行所有持续性操作（创建、读取、更新和删除）。Java EE 应用程序使用相关性注入或在 
  JNDI 名称空间中直接查找实体管理器获取实体管理器。</p>
  <p>使用 <code>@PersistenceContext</code> 批注获取实体管理器：</p>
  <ul>
    <li type="disc">使用相关性注入</li>
    <li type="disc">使用 JNDI 查找按名称进行</li>
    <li type="disc">与特定的持续性单元关联（另请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
    @PersistenceUnit</a>）</li>
    <li type="disc">具有扩展的持续性上下文</li>
    <li type="disc">使用特定的持续性属性进行了自定义（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceProperty">
    @PersistenceProperty</a>）</li>
  </ul>
  <p>如果有多个要指定的 <code>@PersistenceContext</code>，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContexts">
  @PersistenceContexts</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHEGH">
  表 1-32</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceContext.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-32 @PersistenceContext 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PersistenceContext 属性" summary="This table lists the attributes of the PersistenceContext annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t33" align="left" valign="bottom">属性</th>
          <th id="r1c2-t33" align="left" valign="bottom">必需</th>
          <th id="r1c3-t33" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t33" headers="r1c1-t33" align="left"><code>name</code></td>
        <td headers="r2c1-t33 r1c2-t33" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t33 r1c3-t33" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序检索默认实体管理器。<p>如果要注入或查找特定实体管理器，请将 <code>name</code> 设置为要使用的实体管理器的 
        <code>String</code> 名称。</p>
        <p>对于相关性注入，不需要 <code>name</code>。</p>
        <p>对于 JNDI 查找，必须将 <code>name</code> 设置为要在环境引用上下文中访问实体管理器所使用的名称。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t33" headers="r1c1-t33" align="left"><code>properties</code></td>
        <td headers="r3c1-t33 r1c2-t33" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t33 r1c3-t33" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体管理器将使用默认属性。<p>如果要配置包含供应商特定属性的 JPA 持续性提供程序属性（例如，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#persistence-xml">“TopLink 
        JPA Persistence.xml 文件扩展”</a>），请将 <code>properties</code> 设置为 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceProperty">
        @PersistenceProperty</a> 实例数组。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t33" headers="r1c1-t33" align="left"><code>type</code></td>
        <td headers="r4c1-t33 r1c2-t33" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t33 r1c3-t33" align="left"><span class="bold">默认值</span>：<code>PersistenceContextType.TRANSACTION</code>。<p>
        默认情况下，JPA 
        持续性提供程序假设实体管理器是容器管理的，并且它们的持续性上下文的生命周期伸缩到一个事务：即，持续性上下文在事务启动时开始存在，并在事务提交时停止存在。</p>
        <p>在以下条件下，将 <code>type</code> 设置为 <code>PersistenceContextType.EXTENDED</code>：</p>
        <ul>
          <li type="disc">您的持续性上下文是应用程序管理的</li>
          <li type="disc">您希望扩展的持续性上下文在 <code>EntityManager</code> 
          实例从创建一直到关闭期间存在</li>
          <li type="disc">您希望实体管理器在事务提交后维护对实体对象的引用</li>
          <li type="disc">您希望调用 <code>EntityManager</code> 方法 <code>persist</code>、<code>remove</code>、<code>merge</code> 
          和 <code>refresh</code>，而不论事务是否处于活动状态</li>
        </ul>
        </td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t33" headers="r1c1-t33" align="left"><code>unitName</code></td>
        <td headers="r5c1-t33 r1c2-t33" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t33 r1c3-t33" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序检索默认持续性单元的默认实体管理器。<p>如果要注入或查找与特定持续性单元关联的实体管理器，则将 <code>unitName</code> 
        设置为所需的 <code>String</code> 持续性单元名称。或者，如果要指定 <code>EntityManagerFactory</code> 
        和持续性单元，则可以使用 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
        @PersistenceUnit</a>。</p>
        <p>对于相关性注入，不需要 <code>unitName</code>。</p>
        <p>对于 JNDI 查找，如果指定 <code>unitName</code>，则由 <code>name</code> 
        访问的实体管理器必须与此持续性单元关联。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFCBC">
  示例 1-67</a> 显示了如何使用此批注在无状态会话中注入实体管理器，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGHFCD">示例 
  1-68</a> 显示了如何使用此批注在 JNDI 中查找实体管理器。</p>
  <div class="example">
    <p class="titleinexample">示例 1-67 使用 @PersistenceContext 和相关性注入</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContext
EntityManager em;
public void enterOrder(int custID, Order newOrder) {
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-68 使用 @PersistenceContext 和 JNDI 查找</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContext(name=&quot;OrderEM&quot;)
EntityManager em;
public void enterOrder(int custID, Order newOrder) {
em = (EntityManager)ctx.lookup(&quot;OrderEM&quot;);
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PersistenceContexts</h2>
  <p>如果要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
  @PersistenceContext</a>，则必须使用一个 <code>@PersistenceContexts</code> 
  批注指定所有持续性上下文。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIFJIC">
  表 1-33</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceContexts.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-33 @PersistenceContexts 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PersistenceContexts 属性" summary="This table lists the attributes of the PersistenceContexts annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t34" align="left" valign="bottom">属性</th>
          <th id="r1c2-t34" align="left" valign="bottom">必需</th>
          <th id="r1c3-t34" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t34" headers="r1c1-t34" align="left"><code>value</code></td>
        <td headers="r2c1-t34 r1c2-t34" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t34 r1c3-t34" align="left">要指定两个或更多持续性上下文，请将 <code>
        value</code> 设置为 <code>PersistenceContext</code> 实例数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
        @PersistenceContext</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEHJF">
  示例 1-69</a> 显示了如何使用此批注指定两个持续性上下文。</p>
  <div class="example">
    <p class="titleinexample">示例 1-69 @PersistenceContexts</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContexts({
@PersistenceContext(name=&quot;OrderEM&quot;)
@PersistenceContext(name=&quot;ItemEM&quot;),
})
public void enterOrder(int custID, Order newOrder) {
EntityManager em = (EntityManager)ctx.lookup(&quot;OrderEM&quot;);
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
public void enterItem(int orderID, Item newItem) {
EntityManager em = (EntityManager)ctx.lookup(&quot;ItemEM&quot;);
...
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PersistenceProperty</h2>
  <p>默认情况下，JPA 持续性提供程序假设您使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
  @PersistenceContext</a> 获取的实体管理器将使用默认属性。</p>
  <p>使用 <code>@PersistenceProperty</code> 批注指定属性（包括供应商特定的属性），以便容器或持续性提供程序：</p>
  <ul>
    <li type="disc">自定义实体管理器行为</li>
    <li type="disc">利用供应商的 JPA 持续性提供程序实现中的特定特性</li>
  </ul>
  <p>创建实体管理器时将属性传递给持续性提供程序。无法识别的属性被简单地忽略。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEDFAA">
  表 1-34</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceProperty.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-34 @PersistenceProperty 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PersistenceProperty 属性" summary="This table lists the attributes of the PersistenceProperty annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t35" align="left" valign="bottom">属性</th>
          <th id="r1c2-t35" align="left" valign="bottom">必需</th>
          <th id="r1c3-t35" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t35" headers="r1c1-t35" align="left"><code>name</code></td>
        <td headers="r2c1-t35 r1c2-t35" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t35 r1c3-t35" align="left">要指定持续性属性的名称，请将 <code>name</code> 
        设置为 <code>String</code> 属性名。<p>有关持续性属性的详细信息，请参阅 JPA 持续性提供程序文档。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t35" headers="r1c1-t35" align="left"><code>value</code></td>
        <td headers="r3c1-t35 r1c2-t35" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t35 r1c3-t35" align="left">要指定持续性属性的值，请将 <code>value</code> 
        设置为所需的 <code>String</code> 属性值。<p>有关持续性属性值的详细信息，请参阅 JPA 持续性提供程序文档。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCBGJA">
  示例 1-70</a> 显示了如何使用 <code>@PersistenceProperty</code> 批注自定义查询以利用由 TopLink 
  Essentials 提供的供应商 JPA 扩展：在该示例中，该属性确保在此持续性上下文中使用一个完整的 TopLink 缓存。有关详细信息，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#persistence-xml">“TopLink 
  JPA Persistence.xml 文件扩展”</a>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-70 @PersistenceProperty</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContext(
properties={
@PersistenceProperty={name=&quot;toplink.cache.type.default&quot;, value=&quot;CacheType.Full&quot;}
}
)
EntityManager em;
public void enterOrder(int custID, Order newOrder) {
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PersistenceUnit</h2>
  <p>默认情况下，JPA 持续性提供程序使用与默认持续性单元或您使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
  @PersistenceContext</a> 属性 <code>unitName</code> 指定的持续性单元关联的默认 <code>
  EntityManagerFactory</code>。</p>
  <p>使用 <code>@PersistenceUnit</code> 批注指定<code>EntityManagerFactory</code>，您希望 
  JPA 持续性提供程序使用它来：</p>
  <ul>
    <li type="disc">获取指定的实体管理器</li>
    <li type="disc">指定 <code>EntityManagerFactory</code> 和持续性单元</li>
  </ul>
  <p>如果有多个要指定的 <code>@PersistenceUnit</code>，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnits">
  @PersistenceUnits</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEDFAA">
  表 1-34</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceUnit.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-35 @PersistenceUnit 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PersistenceUnit 属性" summary="This table lists the attributes of the PersistenceUnit annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t36" align="left" valign="bottom">属性</th>
          <th id="r1c2-t36" align="left" valign="bottom">必需</th>
          <th id="r1c3-t36" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t36" headers="r1c1-t36" align="left"><code>name</code></td>
        <td headers="r2c1-t36 r1c2-t36" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t36 r1c3-t36" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序从默认 <code>EntityManagerFactory</code> 中获取它的 <code>EntityManager</code> 
        实例。<p>如果希望 JPA 持续性提供程序在注入或查找实体管理器时使用特定的 <code>EntityManagerFactory</code>，请将 
        <code>name</code> 设置为所需的实体管理器工厂的 <code>String</code> 名称。</p>
        <p>对于相关性注入，不需要 <code>name</code>。</p>
        <p>对于 JNDI 查找，必须将 <code>name</code> 设置为要在环境引用上下文中访问实体管理器所使用的名称。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t36" headers="r1c1-t36" align="left"><code>unitName</code></td>
        <td headers="r3c1-t36 r1c2-t36" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t36 r1c3-t36" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序检索默认持续性单元的默认实体管理器。<p>如果要注入或查找与特定持续性单元关联的实体管理器，则将 <code>unitName</code> 
        设置为所需的 <code>String</code> 持续性单元名称。另请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
        @PersistenceContext</a>。</p>
        <p>对于相关性注入，不需要 <code>unitName</code>。</p>
        <p>对于 JNDI 查找，如果指定 <code>unitName</code>，则由 <code>name</code> 访问的 <code>
        EntityManagerFactory</code> 必须与此持续性单元关联。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHBIHH">
  示例 1-71</a> 显示了如何使用 <code>@PersistenceUnit</code> 批注指定要使用的 <code>
  EntityManagerFactory</code> 的 JNDI 名称以及与该工厂关联的持续性单元名称。当 JPA 持续性提供程序使用 JNDI 
  获取一个使用持续性上下文 <code>OrderEM</code> 的实体管理器时，它将使用 JNDI 名称 <code>OrderEMFactory</code> 
  与持续性单元 <code>OrderEMUnit</code> 关联的 <code>EntityManagerFactory</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-71 使用 @PersistenceUnit 指定工厂和单元</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContext(name=&quot;OrderEM&quot;)
@PersistenceUnit(name=&quot;OrderEMFactory&quot;, unitName=&quot;OrderEMUnit&quot;)
EntityManager em;
public void enterOrder(int custID, Order newOrder) {
em = (EntityManager)ctx.lookup(&quot;OrderEM&quot;);
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
}
</pre>
  </div>
  <!-- class="example"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHGFB">
  示例 1-72</a> 显示了一个使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
  @PersistenceContext</a> 属性 <code>unitName</code> 仅指定持续性单元的其他方法。在该示例中，当 JPA 
  持续性提供程序使用 JNDI 获取一个使用持续性上下文 <code>OrderEM</code> 的实体管理器时，它将使用与持续性单元 <code>
  OrderEMUnit</code> 关联的默认 <code>EntityManagerFactory</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-72 使用 @PersistenceContext 属性 unitName</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContext(name=&quot;OrderEM&quot;, unitName=&quot;OrderEMUnit&quot;)
EntityManager em;
public void enterOrder(int custID, Order newOrder) {
em = (EntityManager)ctx.lookup(&quot;OrderEM&quot;);
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PersistenceUnits</h2>
  <p>如果要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
  @PersistenceUnit</a>，则必须使用一个 <code>@PersistenceUnits</code> 批注指定所有持续性上下文。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDGCDA">
  表 1-36</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceUnits.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-36 @PersistenceUnits 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PersistenceUnits 属性" summary="This table lists the attributes of the PersistenceUnits annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t37" align="left" valign="bottom">属性</th>
          <th id="r1c2-t37" align="left" valign="bottom">必需</th>
          <th id="r1c3-t37" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t37" headers="r1c1-t37" align="left"><code>value</code></td>
        <td headers="r2c1-t37 r1c2-t37" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t37 r1c3-t37" align="left">要指定两个或更多持续性单元，请将 <code>
        value</code> 设置为 <code>PersistenceUnit</code> 实例数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
        @PersistenceUnit</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJHAHA">
  示例 1-73</a> 显示了如何使用此批注指定两个持续性单元。在该示例中，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">@PersistenceContext</a> 
  属性 <code>unitName</code> 和 <code>@PersistenceUnit</code> 属性 <code>unitName</code> 
  必须对应以便关联持续性上下文和持续性单元。</p>
  <div class="example">
    <p class="titleinexample">示例 1-73 @PersistenceUnits</p>
    <pre class="oac_no_warn" xml:space="preserve">@Stateless
public class OrderEntryBean implements OrderEntry {
@PersistenceContexts({
@PersistenceContext(name=&quot;OrderEM&quot;, unitName=&quot;OrderEMUnit&quot;)
@PersistenceContext(name=&quot;ItemEM&quot;, unitName=&quot;ItemEMUnit&quot;),
})
@PersistenceUnits({
@PersistenceUnit(name=&quot;OrderEMFactory&quot;, unitName=&quot;OrderEMUnit&quot;),
@PersistenceUnit(name=&quot;ItemEMFactory&quot;, unitName=&quot;ItemEMUnit&quot;)
})
public void enterOrder(int custID, Order newOrder) {
EntityManager em = (EntityManager)ctx.lookup(&quot;OrderEM&quot;);
Customer cust = em.find(Customer.class, custID);
cust.getOrders().add(newOrder);
newOrder.setCustomer(cust);
}
public void enterItem(int orderID, Item newItem) {
EntityManager em = (EntityManager)ctx.lookup(&quot;ItemEM&quot;);
...
}
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PrimaryKeyJoinColumn</h2>
  <p>默认情况下，当一个实体使用 <code>InheritanceType.JOINED</code>（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
  @Inheritance</a>）扩展另一个实体时，JPA 持续性提供程序假设子类的外键列与超类主表的主键列同名。</p>
  <p>使用 <code>@PrimaryKeyJoinColumn</code> 批注：</p>
  <ul>
    <li type="disc">如果子类的外键列与该情形中超类的主表的主键列不同名</li>
    <li type="disc">使用 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
    @SecondaryTable</a> 批注将辅助表连接到主表</li>
    <li type="disc">在 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
    @OneToOne</a> 映射中，引用实体的主键用作被引用实体的外键。</li>
    <li type="disc">使用复合外键（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumns">
    @PrimaryKeyJoinColumns</a>）</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIJEGA">
  表 1-37</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PrimaryKeyJoinColumn.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-37 @PrimaryKeyJoinColumn 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PrimaryKeyJoinColumn 属性" summary="This table lists the attributes of the PrimaryKeyJoinColumn annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t38" align="left" valign="bottom">属性</th>
          <th id="r1c2-t38" align="left" valign="bottom">必需</th>
          <th id="r1c3-t38" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t38" headers="r1c1-t38" align="left"><code>columnDefinition</code></td>
        <td headers="r2c1-t38 r1c2-t38" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t38 r1c3-t38" align="left"><span class="bold">默认值</span>：空 
        <code>String</code>。<p>默认情况下，JPA 使用最少量 SQL 创建一个数据库表列。</p>
        <p>如果需要使用更多指定选项创建的列，请将 <code>columnDefinition</code> 设置为在生成列的 DDL 时希望 
        JPA 使用的 <code>String</code> SQL 片断。</p>
        <p>不要将此属性与 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
        @OneToOne</a> 映射一起使用。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t38" headers="r1c1-t38" align="left"><code>name</code></td>
        <td headers="r3c1-t38 r1c2-t38" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t38 r1c3-t38" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序对当前表的主键列采用以下名称之一（取决于您使用该批注的方式）：<ul>
          <li type="disc"><code>InheritanceType.JOINED</code>（请参阅 
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
          @Inheritance</a>）：与超类的主键列同名。</li>
          <li type="disc">
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
          @SecondaryTable</a> 映射：与主表的主键列同名。</li>
          <li type="disc">
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
          @OneToOne</a> 映射：与引用实体的表的主键列同名。</li>
        </ul>
        <p>如果该名称难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的列名无效，则将 <code>name</code> 
        设置为所需的 <code>String</code> 列名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t38" headers="r1c1-t38" align="left"><code>
        referencedColumnName</code></td>
        <td headers="r4c1-t38 r1c2-t38" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t38 r1c3-t38" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序对连接到的表的主键列采用以下名称之一（取决于您使用该批注的方式）：<ul>
          <li type="disc"><code>InheritanceType.JOINED</code>（请参阅 
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
          @Inheritance</a>）：与超类的主表的主键列同名。</li>
          <li type="disc">
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
          @SecondaryTable</a> 映射：与主表的主键列同名。</li>
          <li type="disc">
          <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
          @OneToOne</a> 映射：与被引用实体的表的主键列同名。</li>
        </ul>
        <p>如果该名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效，请将 <code>
        referencedColumnName</code> 设置为所需的 <code>String</code> 列名。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIADHH">
  示例 1-74</a> 显示了一个实体基类 <code>Customer</code>，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJCBDC">示例 
  1-75</a> 显示了如何使用 <code>@PrimaryKeyJoinColumn</code> 在 <code>ValuedCustomer</code>（<code>Customer</code> 
  的一个子类）的主表中指定主键连接列 <code>CUST_ID</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-74 @PrimaryKeyJoinColumn - 
    InheritanceType.JOINED 超类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(name=&quot;CUST&quot;)
@Inheritance(strategy=JOINED)
@DiscriminatorValue(&quot;CUST&quot;)
public class Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-75 @PrimaryKeyJoinColumn - 
    InheritanceType.JOINED 子类</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(name=&quot;VCUST&quot;)
@DiscriminatorValue(&quot;VCUST&quot;)
@PrimaryKeyJoinColumn(name=&quot;CUST_ID&quot;)
public class ValuedCustomer extends Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@PrimaryKeyJoinColumns</h2>
  <p>默认情况下，JPA 持续性提供程序假设每个实体有一个单列主键。</p>
  <p>如果要指定一个由两个或更多列组成的主键，请使用 <code>@PrimaryKeyJoinColumns</code> 批注。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJFFEG">
  表 1-38</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PrimaryKeyJoinColumns.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-38 @PrimaryKeyJoinColumns 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@PrimaryKeyJoinColumns 属性" summary="This table lists the attributes of the PrimaryKeyJoinColumns annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t39" align="left" valign="bottom">属性</th>
          <th id="r1c2-t39" align="left" valign="bottom">必需</th>
          <th id="r1c3-t39" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t39" headers="r1c1-t39" align="left"><code>value</code></td>
        <td headers="r2c1-t39 r1c2-t39" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t39 r1c3-t39" align="left">要指定一个复合（多列）主键，请将 <code>
        value</code> 设置为 <code>PrimaryKeyJoinColumn</code> 实例的数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumn">
        @PrimaryKeyJoinColumn</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJGBEJ">
  示例 1-76</a> 显示了如何使用此批注指定一个由列 <code>CUST_ID</code> 和 <code>CUST_TYPE</code> 
  组成的复合主键。</p>
  <div class="example">
    <p class="titleinexample">示例 1-76 @PrimaryKeyJoinColumns</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(name=&quot;VCUST&quot;)
@DiscriminatorValue(&quot;VCUST&quot;)
@PrimaryKeyJoinColumns({
@PrimaryKeyJoinColumn(name=&quot;CUST_ID&quot;,referencedColumnName=&quot;ID&quot;),
@PrimaryKeyJoinColumn(name=&quot;CUST_TYPE&quot;,referencedColumnName=&quot;TYPE&quot;)
})
public class ValuedCustomer extends Customer {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@QueryHint</h2>
  <p>默认情况下，JPA 持续性提供程序假设 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery">
  @NamedQuery</a> 或 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a> 应完全按照查询 <code>String</code> 指定的方式执行。</p>
  <p>使用 <code>@QueryHint</code> 批注指定供应商特定的 JPA 查询扩展，以：</p>
  <ul>
    <li type="disc">提高查询性能</li>
    <li type="disc">利用供应商的 JPA 持续性提供程序实现中的特定特性</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE">
  表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/QueryHint.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-39 @QueryHint 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@QueryHint 属性" summary="This table lists the attributes of the QueryHint annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t40" align="left" valign="bottom">属性</th>
          <th id="r1c2-t40" align="left" valign="bottom">必需</th>
          <th id="r1c3-t40" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t40" headers="r1c1-t40" align="left"><code>name</code></td>
        <td headers="r2c1-t40 r1c2-t40" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t40 r1c3-t40" align="left">要指定提示名称，请将 <code>name</code> 
        设置为 <code>String</code> 提示名称。<p>有关提示的详细信息，请参阅 JPA 持续性提供程序文档。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t40" headers="r1c1-t40" align="left"><code>value</code></td>
        <td headers="r3c1-t40 r1c2-t40" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t40 r1c3-t40" align="left">要指定提示的值，请将 <code>value</code> 
        设置为所需的 <code>String</code> 提示值。<p>有关提示值的详细信息，请参阅 JPA 持续性提供程序文档。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEIHE">
  示例 1-77</a> 显示了如何使用 <code>@QueryHint</code> 批注自定义查询以利用由 TopLink Essentials 
  提供的供应商 JPA 扩展：在该示例中，提示确保在执行查询时始终刷新 TopLink 缓存。有关详细信息，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#QueryHints">“TopLink 
  JPA 查询提示扩展”</a>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-77 @QueryHint</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@NamedQuery(
name=&quot;findAllEmployees&quot;,
query=&quot;SELECT * FROM EMPLOYEE WHERE MGR=1&quot;
hints={@QueryHint={name=&quot;toplink.refresh&quot;, value=&quot;true&quot;}}
)
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@SecondaryTable</h2>
  <p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中：该表称作主表（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table">
  @Table</a>）。</p>
  <p>如果希望 JPA 分别将实体的某些持久字段持久保存到主表和其他数据库表，请使用 <code>@SecondaryTable</code> 
  批注将实体与其他数据库表关联。在该示例中，您使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a> 批注将实体的持久字段与表关联。</p>
  <p>如果要将两个或更多辅助表与实体关联，则可以使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTables">
  @SecondaryTables</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGJJJA">
  表 1-40</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SecondaryTable.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-40 @SecondaryTable 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@SecondaryTable 属性" summary="This table lists the attributes of the SecondaryTable annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t41" align="left" valign="bottom">属性</th>
          <th id="r1c2-t41" align="left" valign="bottom">必需</th>
          <th id="r1c3-t41" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t41" headers="r1c1-t41" align="left"><code>姓名</code></td>
        <td headers="r2c1-t41 r1c2-t41" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t41 r1c3-t41" align="left">如果实体使用辅助表，请将 <code>name</code> 
        设置为 <code>String</code> 表名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t41" headers="r1c1-t41" align="left"><code>catalog</code></td>
        <td headers="r3c1-t41 r1c2-t41" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t41 r1c3-t41" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序使用任何适用于数据库的默认目录。<p>如果默认目录不适合于应用程序，请将 <code>catalog</code> 设置为要使用的 
        <code>String</code> 目录名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t41" headers="r1c1-t41" align="left"><code>pkJoinColumns</code></td>
        <td headers="r4c1-t41 r1c2-t41" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t41 r1c3-t41" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的数据库表中的任何列均不用于主键连接。<p>如果对该表中的主键连接使用一个或多个列，请将 <code>
        pkJoinColumns</code> 设置为一个或多个 <code>@PrimaryKeyJoinColumn</code> 
        实例的数组。有关详细信息，请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumn">
        @PrimaryKeyJoinColumn</a>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t41" headers="r1c1-t41" align="left"><code>schema</code></td>
        <td headers="r5c1-t41 r1c2-t41" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t41 r1c3-t41" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序使用任何适用于数据库的默认模式。<p>如果默认模式不适合于应用程序，请将 <code>schema</code> 设置为要使用的 
        <code>String</code> 模式名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t41" headers="r1c1-t41" align="left"><code>
        uniqueConstraints</code></td>
        <td headers="r6c1-t41 r1c2-t41" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t41 r1c3-t41" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的数据库表中的任何列均没有唯一约束。<p>如果唯一约束应用于该表中的一列或多列，请将 <code>
        uniqueContraints</code> 设置为一个或多个 <code>UniqueConstraint</code> 
        实例的数组。有关详细信息，请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
        @UniqueConstraint</a>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBCEGC">
  示例 1-78</a> 显示了如何使用此批注指定一个名为 <code>EMP_HR</code> 的辅助表。在该示例中，默认情况下，JPA 将实体持久字段 
  <code>empId</code> 持久保存到名为 <code>Employee</code> 的主表中的列 <code>empId</code>，并将 
  <code>empSalary</code> 持久保存到辅助表 <code>EMP_HR</code> 中的列 <code>empSalary</code>。有关详细信息，请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-78 @SecondaryTable</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@SecondaryTable(name=&quot;EMP_HR&quot;)
public class Employee implements Serializable {
...
private Long empId;
@Column(table=&quot;EMP_HR&quot;, name=&quot;EMP_SALARY&quot;))
private Float empSalary;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@SecondaryTables</h2>
  <p>如果需要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
  @SecondaryTable</a>，可以使用一个 <code>@SecondaryTables</code> 批注指定所有辅助表。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHBEIA">
  表 1-41</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SecondaryTables.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-41 @SecondaryTables 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@SecondaryTables 属性" summary="This table lists the attributes of the SecondaryTables annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t42" align="left" valign="bottom">属性</th>
          <th id="r1c2-t42" align="left" valign="bottom">必需</th>
          <th id="r1c3-t42" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t42" headers="r1c1-t42" align="left"><code>value</code></td>
        <td headers="r2c1-t42 r1c2-t42" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t42 r1c3-t42" align="left">要指定两个或更多辅助表，请将 <code>value</code> 
        设置为 <code>SecondaryTable</code> 实例的数组（请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
        @SecondaryTable</a>）。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHBGB">
  示例 1-79</a> 显示了如何使用此批注指定两个名为 <code>EMP_HR</code> 和 <code>EMP_TR</code> 
  的辅助表。在该示例中，默认情况下，JPA 将实体持久字段 <code>empId</code> 持久保存到名为 <code>Employee</code> 
  的主表中的列 <code>empId</code>。JPA 将 <code>empSalary</code> 持久保存到辅助表 <code>EMP_HR</code> 
  中的列 <code>empSalary</code>，并将 <code>empClass</code> 持久保存到辅助表 <code>EMP_TR</code> 
  中的列 <code>EMP_HR</code>。有关详细信息，请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-79 @SecondaryTables</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@SecondaryTables({
@SecondaryTable(name=&quot;EMP_HR&quot;),
@SecondaryTable(name=&quot;EMP_TR&quot;)
})
public class Employee implements Serializable {
...
private Long empId;
@Column(table=&quot;EMP_HR&quot;, name=&quot;EMP_SALARY&quot;))
private Float empSalary;
@Column(table=&quot;EMP_TR&quot;, name=&quot;EMP_CLASS&quot;))
private Float empClass;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@SequenceGenerator</h2>
  <p>如果使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue">
  @GeneratedValue</a> 批注指定一个 <code>SEQUENCE</code> 类型的主键生成器，则可以使用 <code>@SequenceGenerator</code> 
  批注微调该主键生成器以：</p>
  <ul>
    <li type="disc">更改分配大小以匹配应用程序要求或数据库性能参数</li>
    <li type="disc">更改初始值以匹配现有的数据模型（例如，如果基于已经为其分配或保留了一组主键值的现有数据集构建）</li>
    <li type="disc">使用现有数据模型中预定义的序列</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBBBBA">
  表 1-42</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SequenceGenerator.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-42 @SequenceGenerator 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@SequenceGenerator 属性" summary="This table lists the attributes of the SequenceGenerator annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t43" align="left" valign="bottom">属性</th>
          <th id="r1c2-t43" align="left" valign="bottom">必需</th>
          <th id="r1c3-t43" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t43" headers="r1c1-t43" align="left"><code>name</code></td>
        <td headers="r2c1-t43 r1c2-t43" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t43 r1c3-t43" align="left"><code>SequenceGenerator</code> 
        的名称必须匹配其 <code>startegy</code> 设置为 <code>SEQUENCE</code> 的 <code>
        GeneratedValue</code> 的名称。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t43" headers="r1c1-t43" align="left"><code>allocationSize</code></td>
        <td headers="r3c1-t43 r1c2-t43" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t43 r1c3-t43" align="left"><span class="bold">默认值</span>： 
        50.<p>默认情况下，JPA 持续性提供程序使用的分配大小为 50。</p>
        <p>如果此分配大小与应用程序要求或数据库性能参数不匹配，请将 <code>allocationSize</code> 设置为所需的 <code>
        int</code> 值。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t43" headers="r1c1-t43" align="left"><code>initialValue</code></td>
        <td headers="r4c1-t43 r1c2-t43" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t43 r1c3-t43" align="left"><span class="bold">默认值</span>： 
        0.<p>默认情况下，JPA 持续性提供程序假设持续性提供程序将所有主键值的起始值设置为 0。</p>
        <p>如果这与现有数据模型不匹配，请将 <code>initialValue</code> 设置为所需的 <code>int</code> 值。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t43" headers="r1c1-t43" align="left"><code>sequenceName</code></td>
        <td headers="r5c1-t43 r1c2-t43" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t43 r1c3-t43" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序分配它自己创建的序列名。<p>如果要使用事先存在或预定义的序列，请将 <code>sequenceName</code> 
        设置为所需的 <code>String</code> 名称。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFFAH">
  示例 1-80</a> 显示了如何使用此批注为名为 <code>CUST_SEQ</code> 的 <code>SEQUENCE</code> 
  主键生成器指定分配大小。</p>
  <div class="example">
    <p class="titleinexample">示例 1-80 @SequenceGenerator</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Id
@SequenceGenerator(name=&quot;CUST_SEQ&quot;, allocationSize=25)
@GeneratedValue(strategy=SEQUENCE, generator=&quot;CUST_SEQ&quot;)
@Column(name=&quot;CUST_ID&quot;)
public Long getId() {
return id;
}
...
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@SqlResultSetMapping</h2>
  <p>执行 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
  @NamedNativeQuery</a> 时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
  <p>默认情况下（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJJDFF">示例 
  1-81</a> 所示），JPA 持续性提供程序假设原生 SQL 查询中的 <code>SELECT</code> 语句：</p>
  <ul>
    <li type="disc">返回一个实体类型</li>
    <li type="disc">包含与返回的实体的所有字段或属性相对应的所有列</li>
    <li type="disc">使用与字段或属性名（未使用 <code>AS</code> 语句）相对应的列名</li>
  </ul>
  <div class="example">
    <p class="titleinexample">示例 1-81 简单的原生 SQL 查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query q = entityManager.createNativeQuery(
&quot;SELECT o.id, o.quantity, o.item &quot; +
&quot;FROM Order o, Item i &quot; +
&quot;WHERE (o.item = i.id) AND (i.name = &quot;widget&quot;)&quot;,
Order.class
);
List resultList = q.getResultList();
// List of Order entity objects:{Order, Order, ...}
</pre>
  </div>
  <!-- class="example"  -->
  <p>如果原生 SQL 查询满足以下条件，请使用 <code>@SqlResultSetMapping</code> 批注控制 JPA 持续性提供程序如何将 
  JDBC 结果集映射到实体字段或属性以及标量：</p>
  <ul>
    <li type="disc">返回多个类型的实体</li>
    <li type="disc">只返回标量值或实体和标量值的组合</li>
    <li type="disc">使用列别名（<code>AS</code> 语句）</li>
  </ul>
  <p>如果有多个 <code>@SqlResultSetMapping</code>，则必须使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMappings">
  @SqlResultSetMappings</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGAGFI">
  表 1-8</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SqlResultSetMapping.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-43 @SqlResultSetMapping 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@SqlResultSetMapping 属性" summary="This table lists the attributes of the SqlResultSetMapping annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t44" align="left" valign="bottom">属性</th>
          <th id="r1c2-t44" align="left" valign="bottom">必需</th>
          <th id="r1c3-t44" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t44" headers="r1c1-t44" align="left"><code>name</code></td>
        <td headers="r2c1-t44 r1c2-t44" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t44 r1c3-t44" align="left">将 <code>name</code> 设置为此 
        <code>@SqlResultSetMapping</code> 的 <code>String</code> 名称。<p>这是用于将 
        <code>@SqlResultSetMapping</code> 与原生 SQL 查询关联的名称（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGIJGJ">示例 
        1-84</a>）。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t44" headers="r1c1-t44" align="left"><code>columns</code></td>
        <td headers="r3c1-t44 r1c2-t44" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t44 r1c3-t44" align="left"><span class="bold">默认值</span>：空 
        <code>ColumnResult</code> 数组。<p>默认情况下，JPA 持续性提供程序假设 <code>SELECT</code> 
        语句只返回实体。</p>
        <p>如果 <code>SELECT</code> 语句返回标量值，则将 <code>columns</code> 设置为 <code>
        ColumnResult</code> 实例的数组，每个标量结果一个 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult">
        @ColumnResult</a>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t44" headers="r1c1-t44" align="left"><code>entities</code></td>
        <td headers="r4c1-t44 r1c2-t44" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t44 r1c3-t44" align="left"><span class="bold">默认值</span>：空 
        <code>EntityResult</code> 数组。<p>默认情况下，JPA 持续性提供程序假设 SELECT 语句返回一个类型的实体。</p>
        <p>如果 SELECT 语句返回多个类型的实体，请将实体设置为 <code>EntityResult</code> 
        实例的数组，每个返回的实体类型一个 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">
        @EntityResult</a>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGCJHD">
  示例 1-82</a> 显示了如何使用此批注将 <code>Order</code> 和 <code>Item</code>（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCBAEJ">示例 
  1-83</a>）实体和标量 <code>name</code> 包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGIJGJ">示例 
  1-84</a>）中。在该示例中，结果列表将为 <code>Object</code> 数组的 <code>List</code>，如：<code>{[Order, 
  Item, &quot;Shoes&quot;], [Order, Item, &quot;Socks&quot;], ...}</code>。</p>
  <div class="example">
    <p class="titleinexample">示例 1-82 使用 @SqlResultSetMapping 的 Order 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@SqlResultSetMapping(
name=&quot;OrderResults&quot;,
entities={
@EntityResult(
entityClass=Order.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;order_id&quot;),
@FieldResult(name=&quot;quantity&quot;, column=&quot;order_quantity&quot;),
@FieldResult(name=&quot;item&quot;,     column=&quot;order_item&quot;)
}
),
@EntityResult(
entityClass=Item.class,
fields={
@FieldResult(name=&quot;id&quot;,       column=&quot;item_id&quot;),
@FieldResult(name=&quot;name&quot;,     column=&quot;item_name&quot;),
}
)
}
columns={
@ColumnResult(
name=&quot;item_name&quot;
)
}
)
@Entity
public class Order {
@Id
protected int id;
protected long quantity;
protected Item item;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-83 Item 实体</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Item {
@Id
protected int id;
protected String name;
...
}
</pre>
  </div>
  <!-- class="example"  -->
  <div class="example">
    <p class="titleinexample">示例 1-84 将 @SqlResultSetMapping 与 @EntityResult 
    一起使用的原生查询</p>
    <pre class="oac_no_warn" xml:space="preserve">Query q = entityManager.createNativeQuery(
&quot;SELECT o.id       AS order_id, &quot; +
&quot;o.quantity AS order_quantity, &quot; +
&quot;o.item     AS order_item, &quot; +
&quot;i.id       AS item_id, &quot; +
&quot;i.name     AS item_name, &quot; +
&quot;FROM Order o, Item i &quot; +
&quot;WHERE (order_quantity &gt; 25) AND (order_item = i.id)&quot;,
&quot;OrderResults&quot;
);
List resultList = q.getResultList();
// List of Object arrays:{[Order, Item, &quot;Shoes&quot;], [Order, Item, &quot;Socks&quot;], ...}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@SqlResultSetMappings</h2>
  <p>如果需要指定多个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
  @SqlResultSetMapping</a>，则必须使用一个 <code>@SqlResultSetMappings</code> 批注指定所有 SQL 
  结果集映射。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB">
  表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SqlResultSetMappings.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-44 @SqlResultSetMappings 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@SqlResultSetMappings 属性" summary="This table lists the attributes of the SqlResultSetMappings annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t45" align="left" valign="bottom">属性</th>
          <th id="r1c2-t45" align="left" valign="bottom">必需</th>
          <th id="r1c3-t45" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t45" headers="r1c1-t45" align="left"><code>value</code></td>
        <td headers="r2c1-t45 r1c2-t45" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t45 r1c3-t45" align="left">要指定两个或更多 SQL 结果集映射，请将 <code>
        value</code> 设置为 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
        @SqlResultSetMapping</a> 实例的数组。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCFDJJ">
  示例 1-85</a> 显示了如何使用此批注指定两个 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
  @SqlResultSetMapping</a> 实例。</p>
  <div class="example">
    <p class="titleinexample">示例 1-85 @SqlResultSetMappings</p>
    <pre class="oac_no_warn" xml:space="preserve">SqlResultSetMappings({
@SqlResultSetMapping(
name=&quot;OrderItemItemNameResults&quot;,
entities={
@EntityResult(entityClass=Order.class),
@EntityResult(entityClass=Item.class)
}
columns={
@ColumnResult(name=&quot;item_name&quot;)
}
),
@SqlResultSetMapping(
name=&quot;OrderItemResults&quot;,
entities={
@EntityResult(entityClass=Order.class),
@EntityResult(entityClass=Item.class)
}
)
})
@Entity
public class Order {
@Id
protected int id;
protected long quantity;
protected Item item;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Table</h2>
  <p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a>）。</p>
  <p>在以下条件下，使用 <code>@Table</code> 批注指定与实体关联的主表：</p>
  <ul>
    <li type="disc">实体名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效</li>
    <li type="disc">需要控制表所属的目录或模式</li>
  </ul>
  <p>如果希望 JPA 将某些字段持久保存到主表，而将其他字段持久保存到一个或多个辅助表，请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
  @SecondaryTable</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEAJB">
  表 1-45</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Table.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-45 @Table 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Table 属性" summary="This table lists the attributes of the Table annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t46" align="left" valign="bottom">属性</th>
          <th id="r1c2-t46" align="left" valign="bottom">必需</th>
          <th id="r1c3-t46" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t46" headers="r1c1-t46" align="left"><code>catalog</code></td>
        <td headers="r2c1-t46 r1c2-t46" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t46 r1c3-t46" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序使用任何适用于数据库的默认目录。<p>如果默认目录不适合于应用程序，请将 <code>catalog</code> 设置为要使用的 
        <code>String</code> 目录名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t46" headers="r1c1-t46" align="left"><code>name</code></td>
        <td headers="r3c1-t46 r1c2-t46" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t46 r1c3-t46" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的数据库表与实体类同名。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA">示例 
        1-86</a> 中，默认 <code>name</code> 为 <code>Employee</code>。<p>
        如果实体类名难以处理、是一个保留字或与预先存在的数据模型不兼容，请将 <code>name</code> 设置为相应的数据表名称。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA">示例 
        1-86</a> 中，JPA 将实体类 <code>Employee</code> 持久保存到名为 <code>EMP</code> 
        的数据库表中。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t46" headers="r1c1-t46" align="left"><code>schema</code></td>
        <td headers="r4c1-t46 r1c2-t46" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t46 r1c3-t46" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序使用任何适用于数据库的默认模式。<p>如果默认模式不适合于应用程序，请将 <code>schema</code> 设置为要使用的 
        <code>String</code> 模式名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t46" headers="r1c1-t46" align="left"><code>
        uniqueConstraints</code></td>
        <td headers="r5c1-t46 r1c2-t46" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t46 r1c3-t46" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设实体的数据库表中的任何列均没有唯一约束。<p>如果唯一约束应用于该表中的一列或多列，请将 uniqueContraints 
        设置为一个或多个 <code>UniqueConstraint</code> 实例的数组。有关详细信息，请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
        @UniqueConstraint</a>。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA">
  示例 1-86</a> 显示了如何使用此批注指定主表名。</p>
  <div class="example">
    <p class="titleinexample">示例 1-86 @Table</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(name=&quot;EMP&quot;)
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@TableGenerator</h2>
  <p>如果使用 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue">
  @GeneratedValue</a> 批注指定一个 <code>TABLE</code> 类型的主键生成器，可以使用 <code>@TableGenerator</code> 
  批注微调该主键生成器以：</p>
  <ul>
    <li type="disc">由于名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效而更改主键生成器的表名称</li>
    <li type="disc">更改分配大小以匹配应用程序要求或数据库性能参数</li>
    <li type="disc">更改初始值以匹配现有的数据模型（例如，如果基于已经为其分配或保留了一组主键值的现有数据集构建）</li>
    <li type="disc">使用特定目录或模式配置主键生成器的表</li>
    <li type="disc">在主键生成器表的一列或多列商配置一个唯一的约束</li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJDBGJ">
  表 1-46</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/TableGenerator.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-46 @TableGenerator 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@TableGenerator 属性" summary="This table lists the attributes of the TableGenerator annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t47" align="left" valign="bottom">属性</th>
          <th id="r1c2-t47" align="left" valign="bottom">必需</th>
          <th id="r1c3-t47" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t47" headers="r1c1-t47" align="left"><code>name</code></td>
        <td headers="r2c1-t47 r1c2-t47" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t47 r1c3-t47" align="left"><code>SequenceGenerator</code> 
        的名称必须匹配其 <code>startegy</code> 设置为 <code>startegy</code> 的 <code>
        GeneratedValue</code> 的名称。生成器名称的作用域对持续性单元是全局的（跨所有生成器类型）。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r3c1-t47" headers="r1c1-t47" align="left"><code>allocationSize</code></td>
        <td headers="r3c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r3c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>： 
        50.<p>默认情况下，JPA 持续性提供程序使用的分配大小为 50。</p>
        <p>如果此分配大小与应用程序要求或数据库性能参数不匹配，请将 <code>allocationSize</code> 设置为所需的 <code>
        int</code> 值。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r4c1-t47" headers="r1c1-t47" align="left"><code>catalog</code></td>
        <td headers="r4c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r4c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序使用任何适用于数据库的默认目录。<p>如果默认目录不适合于应用程序，请将 <code>catalog</code> 设置为要使用的 
        <code>String</code> 目录名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r5c1-t47" headers="r1c1-t47" align="left"><code>initialValue</code></td>
        <td headers="r5c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r5c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>： 
        0.<p>默认情况下，JPA 持续性提供程序将所有主键值的起始值设置为 0。</p>
        <p>如果这与现有数据模型不匹配，请将 <code>initialValue</code> 设置为所需的 <code>int</code> 值。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r6c1-t47" headers="r1c1-t47" align="left"><code>pkColumnName</code></td>
        <td headers="r6c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r6c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序为生成器表中的主键列提供名称。<p>如果该名称不适合于应用程序，请将 <code>pkColumnName</code> 
        设置为所需的 <code>String</code> 名称。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r7c1-t47" headers="r1c1-t47" align="left"><code>pkColumnValue</code></td>
        <td headers="r7c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r7c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序为生成器表中的主键列提供一个合适的主键值。<p>如果该值不适合于应用程序，请将 <code>pkColumnValue</code> 
        设置为所需的 <code>String</code> 值。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r8c1-t47" headers="r1c1-t47" align="left"><code>schema</code></td>
        <td headers="r8c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r8c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序使用任何适用于数据库的默认模式。<p>如果默认模式不适合于应用程序，请将 <code>schema</code> 设置为要使用的 
        <code>String</code> 模式名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r9c1-t47" headers="r1c1-t47" align="left"><code>table</code></td>
        <td headers="r9c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r9c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序为存储生成的 ID 值的表提供了一个合适的名称。<p>如果默认表名不适合于应用程序，请将 <code>table</code> 
        设置为所需的 <code>String</code> 表名。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r10c1-t47" headers="r1c1-t47" align="left"><code>
        uniqueConstraints</code></td>
        <td headers="r10c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r10c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序假设主键生成器表中的任何列均没有唯一约束。<p>如果唯一约束应用于该表中的一列或多列，则将 <code>
        uniqueContraints</code> 设置为一个或多个 <code>UniqueConstraint</code> 
        实例的数组。有关详细信息，请参阅 
        <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
        @UniqueConstraint</a>。</td>
      </tr>
      <tr align="left" valign="top">
        <td id="r11c1-t47" headers="r1c1-t47" align="left"><code>valueColumnName</code></td>
        <td headers="r11c1-t47 r1c2-t47" align="left">
        <img title="可选" alt="可选" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/optional.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r11c1-t47 r1c3-t47" align="left"><span class="bold">默认值</span>：JPA 
        持续性提供程序为存储生成的 ID 值的列提供了一个合适的名称。<p>如果默认列名不适合于应用程序，请将 <code>
        valueColumnName</code> 设置为所需的 <code>String</code> 列名。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCIBFC">
  示例 1-87</a> 显示了如何使用此批注为名为 <code>empGen</code> 的 <code>TABLE</code> 
  主键生成器指定分配大小。</p>
  <div class="example">
    <p class="titleinexample">示例 1-87 @TableGenerator</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Id
@TableGenerator(
name=&quot;empGen&quot;,
allocationSize=1
)
@GeneratedValue(strategy=TABLE, generator=&quot;empGen&quot;)
@Column(name=&quot;CUST_ID&quot;)
public Long getId() {
return id;
}
...
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Temporal</h2>
  <p>使用 <code>@Temporal</code> 批注指定 JPA 持续性提供程序应只为 <code>java.util.Date</code> 和 
  <code>java.util.Calendar</code> 类型的字段或属性持久保存的数据库类型。</p>
  <p>该批注可以与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic">
  @Basic</a> 一起使用。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFIAEE">
  表 1-14</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Temporal.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-47 @Temporal 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@Temporal 属性" summary="This table lists the attributes of the Temporal annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t48" align="left" valign="bottom">属性</th>
          <th id="r1c2-t48" align="left" valign="bottom">必需</th>
          <th id="r1c3-t48" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t48" headers="r1c1-t48" align="left"><code>value</code></td>
        <td headers="r2c1-t48 r1c2-t48" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t48 r1c3-t48" align="left">将 <code>value</code> 设置为与希望 
        JPA 持续性提供程序使用的数据库类型相对应的 <code>TemporalType</code>：<ul>
          <li type="disc"><code>DATE</code> - 等于 <code>java.sql.Date</code></li>
          <li type="disc"><code>TIME</code> - 等于 <code>java.sql.Time</code></li>
          <li type="disc"><code>TIMESTAMP</code> - 等于 <code>java.sql.Timestamp</code></li>
        </ul>
        </td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJJCD">
  示例 1-88</a> 显示了如何使用此批注指定 JPA 持续性提供程序应将 <code>java.util.Date</code> 字段 <code>
  startDate</code> 持久保存为 <code>DATE</code> (<code>java.sql.Date</code>) 数据库类型。</p>
  <div class="example">
    <p class="titleinexample">示例 1-88 @Temporal</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee {
...
@Temporal(DATE)    protected java.util.Date startDate;
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Transient</h2>
  <p>默认情况下，JPA 持续性提供程序假设实体的所有字段均为持久字段。</p>
  <p>使用 <code>@Transient</code> 批注指定实体的非持久字段或属性，例如，一个在运行时使用但并非实体状态一部分的字段或属性。</p>
  <p>JPA 持续性提供程序不会对批注为 <code>@Transient</code> 的属性或字段持久保存（或创建数据库模式）。</p>
  <p>该批注可以与 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
  @Entity</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">@MappedSuperclass</a> 
  和 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
  @Embeddable</a> 一起使用。</p>
  <p>该批注没有属性。有关更多详细信息，请参阅 该批注没有属性。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Transient.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHFCF">
  示例 1-89</a> 显示了如何使用此批注将 <code>Employee</code> 字段 <code>currentSession</code> 
  指定为非持久字段。JPA 持续性提供程序将不持久保存该字段。</p>
  <div class="example">
    <p class="titleinexample">示例 1-89 @Transient</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entitypublic class Employee {    @Id int id;    @Transient Session currentSession;    ...}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@UniqueConstraint</h2>
  <p>默认情况下，JPA 持续性提供程序假设所有列均可以包含重复值。</p>
  <p>使用 <code>@UniqueConstraint</code> 批注指定将在为主表或辅助表生成的 DDL 
  中包含一个唯一约束。或者，您可以在列级别指定唯一约束（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>）。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFDEEA">
  表 1-48</a> 列出了此批注的属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/UniqueConstraint.html">
  API</a>。</p>
  <div class="tblruleformalmax">
    <p class="titleintable">表 1-48 @UniqueConstraint 属性</p>
    <table class="RuleFormalMax" dir="ltr" title="@UniqueConstraint 属性" summary="This table lists the attributes of the UniqueConstraint annotation." border="1" cellpadding="3" cellspacing="0" rules="all" width="100%" frame="border">
      <thead>
        <tr align="left" valign="top">
          <th id="r1c1-t49" align="left" valign="bottom">属性</th>
          <th id="r1c2-t49" align="left" valign="bottom">必需</th>
          <th id="r1c3-t49" align="left" valign="bottom">说明</th>
        </tr>
      </thead>
      <tr align="left" valign="top">
        <td id="r2c1-t49" headers="r1c1-t49" align="left"><code>columnNames</code></td>
        <td headers="r2c1-t49 r1c2-t49" align="left">
        <img title="必需" alt="必需" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/required.gif" width="16" height="16"><p>
        <br>
　</td>
        <td headers="r2c1-t49 r1c3-t49" align="left">如果任何列均包含唯一约束，请将 <code>
        columnNames</code> 设置为 <code>String</code> 列名的数组。</td>
      </tr>
    </table>
    <p><br>
　</div>
  <!-- class="tblruleformalmax"  -->
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDBCAF">
  示例 1-90</a> 显示了如何使用此批注对主表 <code>EMP</code> 中的列 <code>EMP_ID</code> 和 <code>
  EMP_NAME</code> 指定一个唯一约束。</p>
  <div class="example">
    <p class="titleinexample">示例 1-90 使用唯一约束的 @Table</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
@Table(
name=&quot;EMP&quot;,
uniqueConstraints={@UniqueConstraint(columnNames={&quot;EMP_ID&quot;, &quot;EMP_NAME&quot;})}
)
public class Employee implements Serializable {
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">@Version</h2>
  <p>默认情况下，JPA 持续性提供程序假设应用程序负责数据一致性。</p>
  <p>使用 <code>@Version</code> 批注通过指定用作其乐观锁定值的实体类的版本字段或属性来启用 JPA 管理的乐观锁定（推荐做法）。</p>
  <p>选择版本字段或属性时，确保：</p>
  <ul>
    <li type="disc">每个实体只有一个版本字段或属性</li>
    <li type="disc">选择一个持久保存到主表的属性或字段（请参阅 
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table">
    @Table</a>）</li>
    <li type="disc">您的应用程序不修改版本属性或字段</li>
  </ul>
  <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
  <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Version.html">
  API</a>。</p>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCIBDJ">
  示例 1-91</a> 显示了如何使用此批注将属性 getVersionNum 指定为乐观锁定值。在该示例中，该属性的列名设置为 OPTLOCK（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
  @Column</a>），而非属性的默认列名。</p>
  <div class="example">
    <p class="titleinexample">示例 1-91 @Version</p>
    <pre class="oac_no_warn" xml:space="preserve">@Entity
public class Employee implements Serializable {
...
@Version
@Column(name=&quot;OPTLOCK&quot;)
protected int getVersionNum() {
return versionNum;
}
...
}
</pre>
  </div>
  <!-- class="example"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">生命周期事件批注</h2>
  <p>如果需要在生命周期事件期间执行自定义逻辑，请使用以下生命周期事件批注关联生命周期事件与回调方法：</p>
  <ul>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostLoad">
    @PostLoad</a></li>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostPersist">
    @PostPersist</a></li>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostRemove">
    @PostRemove</a></li>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PostUpdate">
    @PostUpdate</a></li>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrePersist">
    @PrePersist</a></li>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PreRemove">
    @PreRemove</a></li>
    <li type="disc">
    <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PreUpdate">
    @PreUpdate</a></li>
  </ul>
  <p>
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCHFJJ">
  图 1-1</a> 演示了 JPA 支持的实体生命周期事件之间的关系。</p>
  <p>可以直接对实体方法进行批注，也可以指定一个或多个实体监听程序类（请参阅 
  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners">
  @EntityListeners</a>）。</p>
  <p>如果直接对实体方法进行批注，则该实体方法必须满足以下要求：</p>
  <ul>
    <li type="disc">实体类方法必须具有以下签名：<pre class="oac_no_warn" xml:space="preserve">public int &lt;MethodName&gt;()
    </pre>
    </li>
    <li type="disc">实体类方法可以有任何方法名称，只要它不以 <code>ejb</code> 开头。</li>
  </ul>
  <div class="figure">
    <p class="titleinfigure">图 1-1 JPA 实体生命周期回调事件批注</p>
    <p>
    <img title="随后是图 1-1 的描述" alt="随后是图 1-1 的描述" src="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/lifeent30.gif" width="702" height="487"><br>
    <a id="sthref73" href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/lifeent30.htm" name="sthref73">
    “图 1-1 JPA 实体生命周期回调事件批注”的描述”</a><br>
    <br>
　</div>
  <!-- class="figure"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PostLoad</h3>
    <p>将实体加载到数据库的当前持续性上下文中后或在向其应用了刷新操作后，调用实体的 <code>@PostLoad</code> 
    方法。在返回或访问查询结果之前或在遍历关联之前调用该方法。</p>
    <p>如果要在实体生命周期中的该点调用自定义逻辑，请使用 <code>@PostLoad</code> 批注。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PostLoad.html">
    API</a>。</div>
  <!-- class="sect2"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PostPersist</h3>
    <p>在实体成为持久实体后，调用该实体的 <code>@PostPersist</code> 
    回调方法。对该操作层叠到的所有实体调用该方法。在数据库插入操作之后调用该方法。这些数据库操作可能在调用了持久操作之后立即发生，也可能在刷新操作（可能在事务结束时发生）发生之后立即发生。PostPersist 
    方法中提供了生成的主键值。</p>
    <p>使用 <code>@PostPersist</code> 批注通知任何相关对象或更新直到插入对象时才可以访问的信息。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PostPersist.html">
    API</a>。</div>
  <!-- class="sect2"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PostRemove</h3>
    <p>在删除实体后，调用该实体的 <code>@PostRemove</code> 
    回调方法。对该操作层叠到的所有实体调用该方法。在数据库删除操作之后调用该方法。这些数据库操作可能在调用了删除操作之后立即发生，也可能在刷新操作（可能在事务结束时发生）发生之后立即发生。</p>
    <p>使用 <code>@PostRemove</code> 批注通知任何相关对象。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PostRemove.html">
    API</a>。</div>
  <!-- class="sect2"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PostUpdate</h3>
    <p>在对实体数据进行了数据库更新操作后，调用实体的 <code>@PostUpdate</code> 
    回调方法。这些数据库操作可以在更新实体状态时发生，也可以在将状态刷新到数据库（位于事务结尾）时发生。注意，究竟此回调是在持久保存实体并随后在单个事务中修改实体时发生还是在修改了实体并随后在单个事务中删除实体时发生与实现相关。可移植应用程序不应依赖此行为。</p>
    <p>如果要在实体生命周期的该点调用自定义逻辑，请使用 <code>@PostUpdate</code> 批注。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PostUpdate.html">
    API</a>。</div>
  <!-- class="sect2"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PrePersist</h3>
    <p>在执行给定实体的相应 EntityManager 持久操作之前，调用该实体的 <code>@PrePersist</code> 
    回调方法。对于向其应用了合并操作并导致创建新管理的实例的实体而言，在向其复制了实体状态后对管理的实例调用该方法。对该操作层叠到的所有实体调用该方法。</p>
    <p>如果要在实体生命周期期间的该点调用自定义逻辑，请使用 <code>@PrePersist</code> 批注。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PrePersist.html">
    API</a>。</div>
  <!-- class="sect2"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PreRemove</h3>
    <p>在针对给定实体执行相应的 EntityManager 删除操作之前，调用该给定实体的 <code>@PreRemove</code> 
    回调方法。对该操作层叠到的所有实体调用该方法。</p>
    <p>如果要在实体生命周期中的该点调用自定义逻辑，请使用 <code>@PreRemove</code> 批注。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PreRemove.html">
    API</a>。</div>
  <!-- class="sect2"  -->
  <div class="sect2">
    <!-- infolevel="all" infotype="General"  -->
    <h3 class="sect2">@PreUpdate</h3>
    <p>在对实体数据进行数据库更新操作之前，调用实体的 <code>@PreUpdate</code> 
    回调方法。这些数据库操作可以在更新实体状态时发生，也可以在将状态刷新到数据库（可能位于事务结尾）时发生。请注意：此回调是否在持久保存实体并随后在单个事务中修改该实体时发生，均依赖于实施。可移植应用程序不应依赖此行为。</p>
    <p>如果要在实体生命周期的该点调用自定义逻辑，请使用 <code>@PreUpdate</code> 批注。</p>
    <p>此批注没有属性。有关更多详细信息，请参阅 。有关更多详细信息，请参阅 
    <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PreUpdate.html">
    API</a>。</div>
  <!-- class="sect2"  -->
</div>
<!-- class="sect1"  -->
<div class="sect1">
  <!-- infolevel="all" infotype="General"  -->
  <h2 class="sect1">批注索引</h2>
  <ul>
    <li type="disc"><span class="bold">A</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride">
      @AssociationOverride</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverrides">
      @AssociationOverrides</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride">
      @AttributeOverride</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverrides">
      @AttributeOverrides</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">B</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic">
      @Basic</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">C</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column">
      @Column</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult">
      @ColumnResult</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">D</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn">
      @DiscriminatorColumn</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue">
      @DiscriminatorValue</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">E</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable">
      @Embeddable</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embedded">
      @Embedded</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId">
      @EmbeddedId</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity">
      @Entity</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners">
      @EntityListeners</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult">
      @EntityResult</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Enumerated">
      @Enumerated</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeDefaultListeners">
      @ExcludeDefaultListeners</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeSuperclassListeners">
      @ExcludeSuperclassListeners</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">F</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult">
      @FieldResult</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">G</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue">
      @GeneratedValue</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">I</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id">
      @Id</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass">
      @IdClass</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance">
      @Inheritance</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">J</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn">
      @JoinColumn</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumns">
      @JoinColumns</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable">
      @JoinTable</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">L</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Lob">
      @Lob</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">M</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToMany">
      @ManyToMany</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToOne">
      @ManyToOne</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MapKey">
      @MapKey</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass">
      @MappedSuperclass</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">N</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQueries">
      @NamedNativeQueries</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery">
      @NamedNativeQuery</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQueries">
      @NamedQueries</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery">
      @NamedQuery</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">O</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToMany">
      @OneToMany</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne">
      @OneToOne</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OrderBy">
      @OrderBy</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">P</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext">
      @PersistenceContext</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContexts">
      @PersistenceContexts</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceProperty">
      @PersistenceProperty</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit">
      @PersistenceUnit</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnits">
      @PersistenceUnits</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumn">
      @PrimaryKeyJoinColumn</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumns">
      @PrimaryKeyJoinColumns</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">Q</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#QueryHint">
      @QueryHint</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">S</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable">
      @SecondaryTable</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTables">
      @SecondaryTables</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SequenceGenerator">
      @SequenceGenerator</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping">
      @SqlResultSetMapping</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMappings">
      @SqlResultSetMappings</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">T</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table">
      @Table</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#TableGenerator">
      @TableGenerator</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Temporal">
      @Temporal</a></li>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Transient">
      @Transient</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">U</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint">
      @UniqueConstraint</a></li>
    </ul>
    </li>
    <li type="disc"><span class="bold">V</span><ul>
      <li type="circle">
      <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Version">
      @Version</a></li>
    </ul>
    </li>
  </ul>
</div>

</body>

</html>
